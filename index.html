<!DOCTYPE html>
<html lang="et">

<head>
  <meta charset="UTF-8">
  <meta name="viewport"
    content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
  <meta name="theme-color" content="#451a03">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <title>Niiluse Teekond - Vana-Egiptuse √µppimism√§ng</title>
  <link rel="manifest" href="manifest.json">
  <link rel="apple-touch-icon" href="icon-192.png">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;600;800&display=swap" rel="stylesheet">
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
  <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
  <script src="https://unpkg.com/tone@14.7.77/build/Tone.js"></script>
  <style>
    :root {
      --egypt-gold: #fbbf24;
      --egypt-sand: #fef3c7;
      --egypt-lapis: #1e3a8a;
      --egypt-brown: #451a03;
    }

    * {
      touch-action: manipulation;
      -webkit-tap-highlight-color: transparent;
      font-family: 'Outfit', sans-serif;
    }

    body {
      overscroll-behavior-y: none;
      user-select: none;
      -webkit-user-select: none;
      background-color: var(--egypt-brown);
      margin: 0;
      padding: 0;
      min-height: 100vh;
      overflow-x: hidden;
    }

    input {
      user-select: text;
      -webkit-user-select: text;
    }

    .glass {
      background: rgba(69, 26, 3, 0.7);
      backdrop-filter: blur(10px);
      -webkit-backdrop-filter: blur(10px);
      border: 1px solid rgba(251, 191, 36, 0.2);
    }

    .glass-light {
      background: rgba(254, 243, 199, 0.9);
      backdrop-filter: blur(8px);
      border: 1px solid rgba(251, 191, 36, 0.3);
    }

    @keyframes float {

      0%,
      100% {
        transform: translateY(0px) rotate(0deg);
      }

      50% {
        transform: translateY(-15px) rotate(2deg);
      }
    }

    .animate-float {
      animation: float 4s ease-in-out infinite;
    }

    @keyframes sand-shimmer {
      from {
        background-position: 0 0;
      }

      to {
        background-position: 100px 100px;
      }
    }

    .bg-sand {
      background-image: radial-gradient(circle, #fbbf24 1px, transparent 1px);
      background-size: 20px 20px;
      opacity: 0.05;
      animation: sand-shimmer 20s linear infinite;
    }

    .btn-egypt {
      transition: all 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
      box-shadow: 0 4px 0 #b45309;
    }

    .btn-egypt:active {
      transform: translateY(2px);
      box-shadow: 0 2px 0 #b45309;
    }

    .achievement-card {
      transition: all 0.5s ease;
    }

    .bg-cream-paper {
      background-image: url('https://www.transparenttextures.com/patterns/cream-paper.png');
    }

    .bg-sandpaper {
      background-image: url('https://www.transparenttextures.com/patterns/sandpaper.png');
    }

    .achievement-card.unlocked {
      animation: unlock-shine 2s linear infinite;
    }

    @keyframes unlock-shine {
      0% {
        box-shadow: 0 0 5px #fbbf24;
      }

      50% {
        box-shadow: 0 0 15px #fbbf24;
      }

      100% {
        box-shadow: 0 0 5px #fbbf24;
      }
    }
  </style>
</head>

<body>
  <div id="root"></div>

  <script type="text/babel">
    const { useState, useEffect, useRef, useCallback } = React;

    // ========== HELIEFEKTID ==========
    const useSounds = () => {
      const synthRef = useRef(null);
      const [soundEnabled, setSoundEnabled] = useState(true);
      const [initialized, setInitialized] = useState(false);

      const initAudio = async () => {
        if (initialized) return;
        await Tone.start();
        synthRef.current = {
          correct: new Tone.Synth({ oscillator: { type: 'sine' }, envelope: { attack: 0.01, decay: 0.2, sustain: 0.1, release: 0.3 } }).toDestination(),
          wrong: new Tone.Synth({ oscillator: { type: 'triangle' }, envelope: { attack: 0.01, decay: 0.3, sustain: 0.1, release: 0.5 } }).toDestination(),
          treasure: new Tone.PolySynth(Tone.Synth, { oscillator: { type: 'sine' }, envelope: { attack: 0.02, decay: 0.3, sustain: 0.2, release: 0.5 } }).toDestination(),
          click: new Tone.MembraneSynth({ pitchDecay: 0.05, octaves: 2, envelope: { attack: 0.001, decay: 0.1, sustain: 0, release: 0.1 } }).toDestination(),
          fanfare: new Tone.PolySynth(Tone.Synth).toDestination(),
          fall: new Tone.Synth({ oscillator: { type: 'sawtooth' }, envelope: { attack: 0.01, decay: 0.5, sustain: 0.2, release: 0.8 } }).toDestination(),
          event: new Tone.PolySynth(Tone.Synth, { oscillator: { type: 'triangle' }, envelope: { attack: 0.05, decay: 0.2, sustain: 0.3, release: 0.4 } }).toDestination()
        };
        setInitialized(true);
      };

      const playSound = useCallback((type) => {
        if (!soundEnabled || !synthRef.current) return;
        const now = Tone.now();
        try {
          switch (type) {
            case 'correct':
              synthRef.current.correct.triggerAttackRelease('C5', '8n', now);
              synthRef.current.correct.triggerAttackRelease('E5', '8n', now + 0.1);
              synthRef.current.correct.triggerAttackRelease('G5', '8n', now + 0.2);
              break;
            case 'wrong':
              synthRef.current.wrong.triggerAttackRelease('C3', '4n', now);
              break;
            case 'treasure':
              synthRef.current.treasure.triggerAttackRelease(['C5', 'E5', 'G5', 'C6'], '4n', now);
              break;
            case 'click':
              synthRef.current.click.triggerAttackRelease('C2', '32n', now);
              break;
            case 'streak':
              synthRef.current.fanfare.triggerAttackRelease(['C4', 'E4', 'G4'], '8n', now);
              synthRef.current.fanfare.triggerAttackRelease(['E4', 'G4', 'B4'], '8n', now + 0.3);
              break;
            case 'victory':
              synthRef.current.fanfare.triggerAttackRelease(['C4', 'E4', 'G4'], '8n', now);
              synthRef.current.fanfare.triggerAttackRelease(['G4', 'C5', 'E5'], '8n', now + 0.4);
              synthRef.current.fanfare.triggerAttackRelease(['C5', 'E5', 'G5'], '2n', now + 0.6);
              break;
            case 'fall':
              synthRef.current.fall.triggerAttackRelease('C4', '8n', now);
              synthRef.current.fall.triggerAttackRelease('A3', '8n', now + 0.15);
              synthRef.current.fall.triggerAttackRelease('F3', '8n', now + 0.3);
              break;
            case 'levelup':
              synthRef.current.correct.triggerAttackRelease('G4', '16n', now);
              synthRef.current.correct.triggerAttackRelease('C5', '16n', now + 0.1);
              synthRef.current.correct.triggerAttackRelease('E5', '16n', now + 0.2);
              synthRef.current.correct.triggerAttackRelease('G5', '8n', now + 0.3);
              break;
            case 'event':
              synthRef.current.event.triggerAttackRelease(['E4', 'G4', 'B4'], '8n', now);
              synthRef.current.event.triggerAttackRelease(['G4', 'B4', 'D5'], '4n', now + 0.2);
              break;
            case 'achievement':
              synthRef.current.fanfare.triggerAttackRelease(['C5', 'E5'], '16n', now);
              synthRef.current.fanfare.triggerAttackRelease(['G5', 'C6'], '8n', now + 0.2);
              break;
          }
        } catch (e) { console.log('Sound error:', e); }
      }, [soundEnabled]);

      return { playSound, soundEnabled, setSoundEnabled, initAudio, initialized };
    };

    // ========== PILDID ==========
    const images = {
      nile: { url: "images/nile.png", emoji: "üåä" },
      delta: { url: "images/delta.png", emoji: "üî∫" },
      egypt_map: { url: "images/egypt_map.png", emoji: "üó∫Ô∏è" },
      giza: { url: "images/giza.png", emoji: "üî∫" },
      sphinx: { url: "images/sphinx.png", emoji: "ü¶Å" },
      step_pyramid: { url: "images/step_pyramid.png", emoji: "üìê" },
      karnak: { url: "https://upload.wikimedia.org/wikipedia/commons/thumb/7/7f/Karnak_Tempel_01.jpg/280px-Karnak_Tempel_01.jpg", emoji: "üèõÔ∏è" },
      luxor: { url: "https://upload.wikimedia.org/wikipedia/commons/thumb/5/5b/Luxor_Temple_R01.jpg/250px-Luxor_Temple_R01.jpg", emoji: "üèõÔ∏è" },
      abu_simbel: { url: "https://upload.wikimedia.org/wikipedia/commons/thumb/2/25/Abu_Simbel%2C_front%2C_Egypt%2C_Oct_2004.jpg/280px-Abu_Simbel%2C_front%2C_Egypt%2C_Oct_2004.jpg", emoji: "üóø" },
      tutankhamun: { url: "images/tutankhamun.png", emoji: "üëë" },
      ramses_ii: { url: "https://upload.wikimedia.org/wikipedia/commons/thumb/0/04/Ramesses_II_in_the_Turin_Museum24.jpg/180px-Ramesses_II_in_the_Turin_Museum24.jpg", emoji: "üóø" },
      nefertiti: { url: "https://upload.wikimedia.org/wikipedia/commons/thumb/1/1f/Nofretete_Neues_Museum.jpg/180px-Nofretete_Neues_Museum.jpg", emoji: "üë∏" },
      hatshepsut: { url: "https://upload.wikimedia.org/wikipedia/commons/thumb/8/8b/Hatshepsut.jpg/180px-Hatshepsut.jpg", emoji: "üëë" },
      akhenaten: { url: "https://upload.wikimedia.org/wikipedia/commons/thumb/5/5a/Pharaoh_Akhenaten.jpg/180px-Pharaoh_Akhenaten.jpg", emoji: "‚òÄÔ∏è" },
      cleopatra: { url: "https://upload.wikimedia.org/wikipedia/commons/thumb/3/3e/Kleopatra-VII.-Altes-Museum-Berlin1.jpg/180px-Kleopatra-VII.-Altes-Museum-Berlin1.jpg", emoji: "üêç" },
      narmer: { url: "https://upload.wikimedia.org/wikipedia/commons/thumb/4/47/Narmer_Palette.jpg/180px-Narmer_Palette.jpg", emoji: "‚öîÔ∏è" },
      anubis: { url: "images/anubis.png", emoji: "üê∫" },
      horus: { url: "images/horus.png", emoji: "ü¶Ö" },
      osiris: { url: "images/osiris.png", emoji: "üíÄ" },
      isis: { url: "images/isis.png", emoji: "üåô" },
      ra: { url: "images/ra.png", emoji: "‚òÄÔ∏è" },
      bastet: { url: "images/bastet.png", emoji: "üê±" },
      thoth: { url: "images/thoth.png", emoji: "ü¶¢" },
      seth: { url: "images/seth.png", emoji: "üå™Ô∏è" },
      maat: { url: "images/maat.png", emoji: "ü™∂" },
      mummy: { url: "https://upload.wikimedia.org/wikipedia/commons/thumb/b/bb/Mummy_Louvre.jpg/150px-Mummy_Louvre.jpg", emoji: "üßü" },
      sarcophagus: { url: "https://upload.wikimedia.org/wikipedia/commons/thumb/3/3a/Tutankhamun_sarcophagus.jpg/200px-Tutankhamun_sarcophagus.jpg", emoji: "‚ö∞Ô∏è" },
      canopic_jars: { url: "https://upload.wikimedia.org/wikipedia/commons/thumb/9/93/Canopic_jars_of_Neskhons.jpg/200px-Canopic_jars_of_Neskhons.jpg", emoji: "üè∫" },
      valley_kings: { url: "https://upload.wikimedia.org/wikipedia/commons/thumb/9/99/ValleyKings.jpg/250px-ValleyKings.jpg", emoji: "üèúÔ∏è" },
      book_dead: { url: "https://upload.wikimedia.org/wikipedia/commons/thumb/5/5c/BD_Hunefer.jpg/280px-BD_Hunefer.jpg", emoji: "üìú" },
      weighing_heart: { url: "https://upload.wikimedia.org/wikipedia/commons/thumb/5/5f/BD_Weighing_of_the_Heart.jpg/280px-BD_Weighing_of_the_Heart.jpg", emoji: "‚öñÔ∏è" },
      rosetta: { url: "https://upload.wikimedia.org/wikipedia/commons/thumb/2/23/Rosetta_Stone.JPG/180px-Rosetta_Stone.JPG", emoji: "ü™®" },
      hieroglyphs: { url: "https://upload.wikimedia.org/wikipedia/commons/thumb/b/be/Hieroglyphs_from_the_tomb_of_Seti_I.jpg/250px-Hieroglyphs_from_the_tomb_of_Seti_I.jpg", emoji: "ìÄÄ" },
      scribe: { url: "https://upload.wikimedia.org/wikipedia/commons/thumb/8/8f/Egypte_louvre_001.JPG/180px-Egypte_louvre_001.JPG", emoji: "‚úçÔ∏è" },
      scarab: { url: "https://upload.wikimedia.org/wikipedia/commons/thumb/e/ef/Lapis.lazuli.scarab.800pix.060203.jpg/200px-Lapis.lazuli.scarab.800pix.060203.jpg", emoji: "ü™≤" },
      workers: { url: "https://upload.wikimedia.org/wikipedia/commons/thumb/5/55/Maler_der_Grabkammer_des_Menna_004.jpg/250px-Maler_der_Grabkammer_des_Menna_004.jpg", emoji: "üë∑" },
      farmers: { url: "https://upload.wikimedia.org/wikipedia/commons/thumb/a/ae/Maler_der_Grabkammer_des_Sennedjem_001.jpg/250px-Maler_der_Grabkammer_des_Sennedjem_001.jpg", emoji: "üåæ" },
      alexander: { url: "https://upload.wikimedia.org/wikipedia/commons/thumb/e/e1/Alexander_the_Great_mosaic.jpg/200px-Alexander_the_Great_mosaic.jpg", emoji: "‚öîÔ∏è" },
      howard_carter: { url: "https://upload.wikimedia.org/wikipedia/commons/thumb/5/54/Howard_Carter_with_Innermost_Coffin_of_Tutankhamun.jpg/200px-Howard_Carter_with_Innermost_Coffin_of_Tutankhamun.jpg", emoji: "üî¶" },
      amarna: { url: "https://upload.wikimedia.org/wikipedia/commons/thumb/8/85/House_Altar_Akhenaten_Nefertiti_Berlin.jpg/200px-House_Altar_Akhenaten_Nefertiti_Berlin.jpg", emoji: "üèõÔ∏è" },
      aten: { url: "https://upload.wikimedia.org/wikipedia/commons/thumb/4/4a/Aten_disk.jpg/200px-Aten_disk.jpg", emoji: "‚òÄÔ∏è" },
      war_chariot: { url: "https://upload.wikimedia.org/wikipedia/commons/thumb/3/3b/Egyptian_Chariot.jpg/280px-Egyptian_Chariot.jpg", emoji: "üèéÔ∏è" },
      sekhmet: { url: "images/sekhmet.png", emoji: "ü¶Å" },
      bes: { url: "images/bes.png", emoji: "üë∫" },
      taweret: { url: "images/taweret.png", emoji: "ü¶õ" },
      khepri: { url: "images/khepri.png", emoji: "ü™≤" },
      bubastis: { url: "images/bubastis.png", emoji: "üê±" }
    };

    // Pildikomponent
    const QuestionImage = ({ imageData, large = false, full = false }) => {
      const [failed, setFailed] = useState(false);
      if (!imageData) return null;

      const sizeClasses = full ? 'w-full h-full' : (large ? 'w-32 h-32 text-8xl' : 'w-20 h-20 text-5xl');
      const containerClasses = `bg-amber-200 rounded-2xl flex items-center justify-center shadow-lg ${sizeClasses}`;

      if (typeof imageData === 'string') {
        return (<div className={containerClasses}>{imageData}</div>);
      }
      if (failed) {
        return (<div className={containerClasses}>{imageData.emoji}</div>);
      }
      return (<img src={imageData.url} alt="" onError={() => setFailed(true)} className={`rounded-2xl shadow-lg ${full ? 'object-contain' : 'object-cover'} ${sizeClasses}`} />);
    };

    // ========== S√úNDMUSED ==========
    const randomEvents = [
      { id: 'flood', name: 'Niiluse √ºleujutus', icon: 'üåä', description: 'Topelt punktid j√§rgmise 3 k√ºsimuse eest!', effect: 'doublePoints', duration: 3, positive: true },
      { id: 'blessing', name: 'Vaarao √µnnistus', icon: 'üëë', description: 'Saad √ºhe lisaelu!', effect: 'extraLife', positive: true },
      { id: 'thoth', name: 'Thoti tarkus', icon: 'ü¶¢', description: 'J√§rgmine vihje on tasuta!', effect: 'freeHint', positive: true },
      { id: 'scarab', name: 'Skarabeuse √µnn', icon: 'ü™≤', description: 'J√§rgmine vale vastus ei v√µta elu!', effect: 'shield', positive: true },
      { id: 'seth', name: 'Sethi needus', icon: 'üå™Ô∏è', description: 'Kaotad 50 punkti!', effect: 'losePoints', positive: false },
    ];

    // ========== SAAVUTUSED ==========
    const achievements = [
      { id: 'first_correct', name: 'Esimene samm', icon: 'üë£', description: 'Vasta √µigesti', condition: (s) => s.totalCorrect >= 1 },
      { id: 'streak5', name: 'Tulekahju', icon: 'üî•', description: '5 √µiget j√§rjest', condition: (s) => s.bestStreak >= 5 },
      { id: 'streak10', name: 'P√µlev p√§ike', icon: '‚òÄÔ∏è', description: '10 √µiget j√§rjest', condition: (s) => s.bestStreak >= 10 },
      { id: 'collector5', name: 'Koguja', icon: 'üè∫', description: 'Kogu 5 aaret', condition: (s) => s.treasureCount >= 5 },
      { id: 'scholar10', name: '√ïpilane', icon: 'üìñ', description: 'Kogu 10 faktikaarti', condition: (s) => s.factCount >= 10 },
      { id: 'perfect_location', name: 'Perfektne', icon: '‚≠ê', description: 'L√§bi asukoht vigadeta', condition: (s) => s.perfectLocations >= 1 },
      { id: 'explorer', name: 'Maadeavastaja', icon: 'üó∫Ô∏è', description: 'Tunne Egiptuse geograafiat', condition: (s) => s.geoCorrect >= 3 },
      { id: 'pharaoh', name: 'Vaarao', icon: 'üëë', description: 'L√§bi kogu m√§ng', condition: (s) => s.gameCompleted },
    ];

    // ========== K√úSIMUSED ==========
    const allQuestions = [
      // ===================== DELTA (Geography & Basics) =====================
      {
        id: 'new_delta_1', type: 'choice', location: 'delta', difficulty: 1,
        question: "Mis suunas voolab Niiluse j√µgi?",
        options: ["P√µhjast l√µunasse", "L√µunast p√µhja", "Idast l√§√§nde", "L√§√§nest itta"],
        correct: 1,
        image: images.egypt_map,
        explanation: "Niilus on √ºks v√§heseid suurj√µgesid maailmas, mis voolab l√µunast p√µhja ‚Äì Aafrika sisealadelt Vahemere poole. See m√§√§ras √§ra ka Egiptuse jaotuse: √úlem-Egiptus asus l√µunas (j√µe √ºlemjooksul) ja Alam-Egiptus p√µhjas (j√µe suudmes).",
        wrongFeedback: {
          0: "Enamik maailma j√µgesid voolab t√µesti l√µunasse, kuid Niilus on erand, voolates Vahemere poole.",
          2: "Idast l√§√§nde voolamine t√§hendaks k√µrbesse suundumist, kuid Niilus j√§rgib oru p√µhja-suunda.",
          3: "Niilus ei voola itta, Punase mere poole, vaid p√ºsib oma viljakas orus."
        }
      },
      {
        id: 'geo_hotspot_1', type: 'hotspot', location: 'delta', difficulty: 1,
        question: "Leia kaardilt Niiluse delta (j√µe suue Vahemere √§√§res)!",
        image: images.egypt_map,
        correct: { targetX: 50, targetY: 12, radius: 10 },
        explanation: "Niiluse delta on viljakas kolmnurkne piirkond P√µhja-Egiptuses, kus Niilus hargneb ja suubub Vahemere sisse. See oli Vana-Egiptuse k√µige viljakam ala."
      },
      {
        id: 'geo_hotspot_2', type: 'hotspot', location: 'delta', difficulty: 2,
        question: "Kus asub Punane meri?",
        image: images.egypt_map,
        correct: { targetX: 85, targetY: 55, radius: 15 },
        explanation: "Punane meri piirab Egiptust idast. See oli oluline meretee ja eraldas Egiptust Araabia poolsaarest."
      },
      {
        id: 'geo_hotspot_3', type: 'hotspot', location: 'delta', difficulty: 2,
        question: "Leia kaardilt √úlem-Egiptus (j√µe √ºlemjooks l√µuna pool)!",
        image: images.egypt_map,
        correct: { targetX: 52, targetY: 75, radius: 15 },
        explanation: "√úlem-Egiptus asus j√µe voolusuuna j√§rgi '√ºleval' ehk l√µunas. Selle s√ºmboliks oli valge kroon ja lootoslill."
      },
      {
        id: 'new_delta_2', type: 'choice', location: 'delta', difficulty: 2,
        question: "Millal j√µudis harilikult Egiptusesse tulvavesi, mis t√§histas √ºleujutuse algust?",
        options: ["M√§rtsis", "Juuni l√µpus ja juulis", "Septembris", "Detsembris"],
        correct: 1,
        image: images.nile,
        explanation: "Juuni l√µpus ja juulis Egiptusesse j√µudev tulvavesi t√µi kaasa s√ºgiseni kestva √ºleujutuse. See oli p√µhjustatud vihmaperioodidest Niiluse √ºlemjooksul. Tulvavesi j√§ttis maha pehme ja viljaka mudakihi, mis oli p√µlluharimise aluseks.",
        wrongFeedback: {
          0: "M√§rts on Egiptuses saagikoristuse aeg, mil maa hakkab uue tulva ootel kuivama.",
          2: "September on √ºleujutuse k√µrgaeg, mil vesi p√ºsib p√µldudel, kuid tulv algab varem.",
          3: "Detsember on talv, mil vili juba kasvab taandunud veest j√§√§nud mudas."
        }
      },
      {
        id: 'new_delta_3', type: 'choice', location: 'delta', difficulty: 2,
        question: "Milline t√§ht koidutaevas m√§rkis egiptlastele uue aasta ja √ºleujutuse algust?",
        options: ["P√µhjanael", "Siirius", "Orion", "Veenus"],
        correct: 1,
        image: images.ra,
        explanation: "Egiptlased panid t√§hele, et Niiluse √ºleujutus algas alati umbes sel ajal, kui vahepeal varjus olnud t√§ht Siirius uuesti koidutaevasse ilmus. Sellest ilmingust lahutas eelmist korda t√§pselt 365 p√§eva, mis sai egiptlaste p√§ikesekalendri aluseks.",
        wrongFeedback: {
          0: "P√µhjanaela kasutati navigeerimiseks, kuid see ei olnud seotud Niiluse r√ºtmiga.",
          2: "Orion oli egiptlastele t√§htis (seostati Osirisega), kuid uut aastat kuulutas Siirius.",
          3: "Veenus on planeet, mitte t√§ht, ega m√§rkinud kalendriaasta algust."
        }
      },
      {
        id: 'new_delta_4', type: 'truefalse', location: 'delta', difficulty: 1,
        question: "Vana-Egiptuse arstid oskasid teha isegi keerulisi silmaoperatsioone.",
        correct: true,
        image: images.scribe,
        explanation: "Egiptuse teadus oli praktilise suunitlusega. Arstiteaduses olid nad v√§ga edasij√µudnud, osates teha keerulisi operatsioone. Nad m√µistsid, et haiguste t√µrjel pole esmat√§htsad palved, vaid √µige diagnoos ja kohane ravi.",
        treasure: "lotus"
      },
      {
        id: 'new_delta_5', type: 'written', location: 'delta', difficulty: 3,
        question: "Kuidas nimetati egiptlaste praktilist teadust, mis t√§hendas kreeka keeles 'maam√µ√µtmine'?",
        answer: ["geomeetria"],
        image: images.egypt_map,
        explanation: "Geomeetria tekkis Egiptuses vajadusest p√§rast iga-aastast Niiluse √ºleujutust p√µllupiirid uuesti paika panna. Nad oskasid arvutada kolmnurga ja ringi pindala (tundes arvu pii) ning p√ºramiidi ruumala."
      },
      {
        id: 'new_delta_6', type: 'choice', location: 'delta', difficulty: 1,
        question: "Kuidas nimetasid egiptlased oma maad, mis t√§hendas 'Must Maa'?",
        options: ["Deshret", "Kemet", "Oaas", "Mesopotaamia"],
        correct: 1,
        image: images.nile,
        explanation: "Egiptlased nimetasid oma viljakat maad 'Kemetiks' (Must Maa) j√µe poolt toodud musta muda t√µttu. √úmbritsev k√µrb oli 'Deshret' ehk Punane Maa.",
        wrongFeedback: {
          0: "Deshret t√§histas just Punast Maad ehk elutut k√µrbe.",
          2: "Oaas on √ºksik haljasala k√µrbes, kuid mitte kogu Egiptuse nimi.",
          3: "Mesopotaamia (Kahej√µe-maa) asus hoopis t√§nap√§eva Iraagi aladel."
        }
      },
      {
        id: 'new_delta_7', type: 'written', location: 'delta', difficulty: 2,
        question: "Milline meri piirab Egiptust p√µhja poolt?",
        answer: ["vahemeri"],
        image: images.egypt_map,
        explanation: "Niilus suubub p√µhjas Vahemerre, moodustades hiiglasliku ja viljaka delta. See oli Egiptuse v√§rav Euroopasse ja L√§his-itta."
      },
      {
        id: 'new_delta_8', type: 'choice', location: 'delta', difficulty: 2,
        question: "Mis oli peamine kirjutusmaterjal, mida valmistati Niiluse kallastel kasvavast roost?",
        options: ["P√§rgament", "Savi", "Pap√º√ºrus", "Paber"],
        correct: 2,
        image: images.scribe,
        explanation: "Niiluse deltasmudas kasvas ohtralt pap√º√ºrust. Selle varred l√µigati ribadeks, asetati ristamisi ja rulliti lehtedeks. See oli Vana-Egiptuse suurim eksportartikkel.",
        wrongFeedback: {
          0: "P√§rgamenti tehti loomanahkadest ja see muutus populaarseks palju hiljem.",
          1: "Savitahvleid kasutasid egiptlaste naabrid sumerid Mesopotaamias.",
          3: "T√§nap√§evane paber leiutati Hiinas sadu aastaid p√§rast p√ºramiidide aega."
        }
      },
      {
        id: 'new_delta_9', type: 'truefalse', location: 'delta', difficulty: 2,
        question: "Niiluse j√µel on kaks peamist haru, mis √ºhinevad Sudaanis: Sinine Niilus ja Valge Niilus.",
        correct: true,
        image: images.egypt_map,
        explanation: "Valge Niilus algab Victoria j√§rvest ja Sinine Niilus Etioopia m√§gedest. Need kaks saavad kokku Hartumis ja voolavad √ºhiselt l√§bi Egiptuse Vahemerre.",
        treasure: "papyrus"
      },
      {
        id: 'sort_delta_1', type: 'sorting', location: 'delta', difficulty: 2,
        question: "Pane need Egiptuse p√µllumajanduse etapid ajaliselt j√§rjekorda!",
        options: ["Niiluse √ºleujutus (Akhet)", "Vee taandumine ja k√ºlv (Peret)", "Vilja kasvamine (Shemu algus)", "L√µikus ja koristus (Shemu l√µpp)"],
        correct: [0, 1, 2, 3],
        image: images.farmers,
        explanation: "Egiptuse kalender jagunes kolmeks neljakuuliseks aastaajaks: Akhet (√ºleujutus), Peret (k√ºlv ja vilja t√§rkamine) ning Shemu (saagikoristus ja kuivus).",
        treasure: "papyrus"
      },
      {
        id: 'new_delta_multi', type: 'multiSelect', location: 'delta', difficulty: 2,
        question: "Millised neist loomadest elasid muistsel ajal Niiluse j√µes ja selle kallastel? (Vali 2 √µiget)",
        options: ["Krokodill", "J√µehobu", "Kaelkirjak", "J√§√§karu"],
        correct: [0, 1],
        image: images.nile,
        explanation: "Niilus oli koduks paljudele ohtlikele loomadele, kellest krokodill ja j√µehobu olid egiptlaste jaoks k√µige kardetumad ja austatumad."
      },
      {
        id: 'new_delta_10', type: 'choice', location: 'delta', difficulty: 1,
        question: "Kui pikk on umbes Niiluse j√µgi, mida peetakse maailma pikimaks?",
        options: ["Umbes 2000 km", "Umbes 4500 km", "Umbes 6650 km", "Umbes 10 000 km"],
        correct: 2,
        image: images.nile,
        explanation: "Niilus on umbes 6650 km pikkune. See voolab l√§bi k√ºmne riigi ja oli Vana-Egiptuse tsivilisatsiooni elluj√§√§mise ainus tagatis keset k√µrbet."
      },
      {
        id: 'new_delta_cats_1', type: 'truefalse', location: 'delta', difficulty: 1,
        question: "Vana-Egiptuses oli kassi tapmine keelatud ja selle eest v√µis karistada surmanuhtlusega.",
        correct: true,
        image: images.bastet,
        explanation: "Kassid olid p√ºhad loomad ja vaarao kaitse all. Ajaloolane Diodoros kirjeldab, kuidas aastal 59 eKr tappis rahvahulk Rooma diplomaadi, kes oli kogemata kassi alla ajanud."
      },
      {
        id: 'new_delta_cats_2', type: 'choice', location: 'delta', difficulty: 2,
        question: "Millise suurlinna keskel asus punasest graniidist tempel, mis oli p√ºhendatud kassijumalanna Bastetile?",
        options: ["Memphis", "Teeba", "Bubastis", "Giza"],
        correct: 2,
        image: images.bubastis,
        explanation: "Bubastise linn (Egiptuse keeles Per-Bast) oli kassijumalanna kultuse keskus, kus igal aastal toimusid suured pidustused."
      },
      {
        id: 'new_delta_khepri', type: 'written', location: 'delta', difficulty: 2,
        question: "Kes oli mardikajumal, kes s√ºmboliseeris t√§rkavat p√§ikest ja maailma loomist?",
        answer: ["khepri", "hepri"],
        image: images.khepri,
        explanation: "Khepri (ka Hepri) t√§hendab 'seda, kes on s√ºndinud'. Teda kujutati mardikana, kes veeretab p√§ikeseketast √ºle taeva, sarnaselt sitasitikale, kes veeretab s√µnnikupalli."
      },
      {
        id: 'new_delta_11', type: 'matching', location: 'delta', difficulty: 2,
        question: "√úhenda k√µrb ja selle asukoht Egiptuse suhtes!",
        options: {
          left: ["Idas asuv k√µrb", "L√§√§nes asuv k√µrb"],
          right: ["Arabia k√µrb", "Liib√ºa k√µrb (Sahara osa)"]
        },
        correct: [0, 1],
        image: images.egypt_map,
        explanation: "Egiptust piiras idast Arabia k√µrb ja l√§√§nest tohutu Liib√ºa k√µrb, mis on osa Saharast. Need looduslikud piirid pakkusid maale kaitset sissetungijate eest."
      },
      // ... (muud delta k√ºsimused)

      // ===================== GIZA & MEMPHIS (Old Kingdom & Society) =====================
      {
        id: 'new_memphis_1', type: 'choice', location: 'memphis', difficulty: 1,
        question: "Mida t√§hendab egiptuse keeles s√µna 'vaarao'?",
        options: ["Jumalik valitseja", "Suur maja", "P√ºha kuningas", "P√§ikese poeg"],
        correct: 1,
        image: images.tutankhamun,
        explanation: "S√µna 'vaarao' t√§hendas algselt 'suur maja', viidates kuninga paleele. Hiljem sai sellest valitseja tiitel. Vaaraod peeti seadusandjaks, s√µjav√§e √ºlemjuhatajaks ja ainukeseks vahendajaks inimeste ja jumalate vahel.",
        wrongFeedback: {
          0: "Kuigi vaaraod peeti jumalikuks, pole see s√µna otsene t√§hendus.",
          2: "Kuningas oli vaarao s√ºnon√º√ºm, kuid 'vaarao' t√§hendus peitub ehitises.",
          3: "P√§ikese poeg (Sa-Ra) oli √ºks valitseja paljudest tiitlitest, kuid mitte 'vaarao' t√§hendus."
        }
      },
      {
        id: 'new_memphis_2', type: 'choice', location: 'memphis', difficulty: 2,
        question: "Kuhu rajas kuningas Menes Egiptuse uue pealinna Memphise?",
        options: ["Niiluse deltasse", "Alam- ja √úlem-Egiptuse piirialale", "Kuningate orgu", "Nuubia piirile"],
        correct: 1,
        image: images.narmer,
        explanation: "Umbes 3000 aastat eKr liitsid √úlem-Egiptuse valitsejad kogu maa √ºhtseks riigiks. P√§rimuse j√§rgi tegi seda kuningas Menes, kes rajas strateegiliselt t√§htsale Alam- ja √úlem-Egiptuse piirialale uue pealinna Memphise.",
        wrongFeedback: {
          0: "Delta asub p√µhjas, kuid Memphis rajati just kahe piirkonna √ºhenduskohta.",
          2: "Kuningate org asub Teeba l√§hedal ja muutus t√§htsaks alles Uue riigi ajal.",
          3: "Nuubia piir asub kaugel l√µunas, Memphis aga riigi keskme l√§hedal."
        }
      },
      {
        id: 'new_memphis_3', type: 'choice', location: 'memphis', difficulty: 2,
        question: "Kui suure osa oma saagist pidi talupoeg tavaliselt maksudena riigile loovutama?",
        options: ["K√ºmnendiku", "Umbes poole", "Maksud puudusid", "Kogu saagi"],
        correct: 1,
        image: images.farmers,
        explanation: "Enamik egiptlasi olid talupojad, kes harisid riigi v√µi √ºlikute maid. Kirjutajad hindasid vilja valmimise ajal oodatava saagi ja kehtestasid maksum√§√§ra, mis oli tavaliselt umbes pool saagist. Kohustuse t√§itmata j√§tmisel v√µis oodata piitsutamine v√µi orjus.",
        wrongFeedback: {
          0: "K√ºmnendik on ajalooliselt tuntud kui 'kirikumaks', kuid Egiptuses oli koormis m√§rksa r√§ngem.",
          2: "Riik p√ºsiski talupoegade maksudest ja t√∂√∂kohustusest, maksud olid v√§ltimatud.",
          3: "Kogu saagi loovutamine t√§hendaks n√§lga; pool j√§eti talupojale endale elluj√§√§mises."
        }
      },
      {
        id: 'new_memphis_matching', type: 'matching', location: 'memphis', difficulty: 3,
        question: "√úhenda egiptuse jumal ja tema pea/kuju!",
        options: {
          left: ["Horus", "Anubis", "Bastet", "Sobek"],
          right: ["≈†aakal", "Kass", "Kull", "Krokodill"]
        },
        correct: [2, 0, 1, 3], // Horus=Kull, Anubis=≈†aakal, Bastet=Kass, Sobek=Krokodill
        image: images.osiris,
        explanation: "Egiptuse jumalatel olid sageli loomade pead, mis s√ºmboliseerisid nende iseloomu v√µi v√µimeid."
      },
      {
        id: 'new_memphis_4', type: 'choice', location: 'memphis', difficulty: 1,
        question: "Milline √ºhiskonnakiht asus vaarao j√§rel j√§rgmisena v√µimup√ºramiidi tipus?",
        displayImage: images.scribe,
        options: ["S√µdurid", "Preestrid ja √ºlikud", "K√§sit√∂√∂lised", "Talupojad"],
        correct: 1,
        image: images.scribe,
        explanation: "Egiptuse √ºhiskond oli rangelt hierarhiline. Tipus seisis vaarao, kelle v√µim tugines suhteliselt kitsale √ºlikkonnale, kelle seast p√§rinesid k√µrgeimad riigiametnikud ja preestrid.",
        wrongFeedback: {
          0: "S√µdurid olid olulised, kuid asusid hierarhias √ºlikutest ja preestritest madalamal.",
          2: "K√§sit√∂√∂lised olid vabad inimesed, kuid nende sotsiaalne positsioon oli madal.",
          3: "Talupojad moodustasid √ºhiskonna suurima osa, kuid asusid p√ºramiidi p√µhjas."
        }
      },
      {
        id: 'new_memphis_5', type: 'multiSelect', location: 'memphis', difficulty: 2,
        question: "Millised neist olid vaarao v√µimus√ºmbolid? (Vali 2 √µiget)",
        options: ["Topeltkroon", "Savitahvel", "K√§rus ja piits", "Raudm√µ√µk"],
        correct: [0, 2],
        image: images.tutankhamun,
        explanation: "Vaarao v√µimus√ºmbolid olid topeltkroon (√ºhendatud Egiptuse m√§rk), v√µltshabe, nemes-peakate ning k√§rus ja piits, mis s√ºmboliseerisid karjase ja valitseja rolli."
      },
      {
        id: 'new_memphis_6', type: 'choice', location: 'memphis', difficulty: 2,
        question: "Mitu p√§eva oli Vana-Egiptuse p√§ikesekalendris, mis on ka meie kalendri aluseks?",
        options: ["354 p√§eva", "360 p√§eva", "365 p√§eva", "370 p√§eva"],
        correct: 2,
        image: images.egypt_map,
        explanation: "Egiptlased kasutasid 365-p√§evast kalendrit: 12 kuud (iga√ºhes 30 p√§eva) pluss 5 lisap√§eva aasta l√µpus."
      },
      {
        id: 'new_memphis_7', type: 'choice', location: 'memphis', difficulty: 1,
        question: "Miks oli kirjutaja (skriiba) amet Vana-Egiptuses v√§ga austatud?",
        options: ["Nad olid tugevaimad s√µdurid", "Nad oskasid ainsana p√ºramiide ehitada", "Kirjaoskus oli haruldane ja andis p√§√§su riigiametitesse", "Nad olid vaarao sugulased"],
        correct: 2,
        image: images.scribe,
        explanation: "Kirjaoskus oli keeruline ja selle omandamine v√µttis aastaid. Kirjutajad olid haritud eliit, kes vabastati f√º√ºsilisest t√∂√∂st ja maksudest."
      },
      {
        id: 'new_memphis_5', type: 'truefalse', location: 'memphis', difficulty: 2,
        question: "Egiptuse k√§sit√∂√∂lised said oma t√∂√∂ eest palka rahas.",
        correct: false,
        image: images.workers,
        explanation: "Raha Vana-Egiptuses ei tuntud. K√§sit√∂√∂listele ja ka teistele t√∂√∂tajatele tasuti tarbeesemete ning toiduga (vili, √µlu, riie). See oli natuuramajandus, kus v√§√§rtust m√µ√µdeti kaubavahetusega.",
        treasure: "scarab"
      },
      {
        id: 'new_memphis_6', type: 'written', location: 'memphis', difficulty: 2,
        question: "Kes oli see jumal, keda peeti Memphise linna kaitsjaks ja k√§sit√∂√∂liste jumalaks?",
        answer: ["ptah"],
        image: images.narmer,
        explanation: "Ptah oli loomisjumal, kes arvati olevat maailma oma m√µtte ja s√µnaga loonud. Tema kultuse keskus oli pealinn Memphis."
      },
      {
        id: 'new_memphis_7', type: 'choice', location: 'memphis', difficulty: 2,
        question: "Millist materjali kasutasid Egiptuse kirjutajad mustandite ja jooniste jaoks sagedamini kui kallist pap√º√ºrust?",
        options: ["Savi", "Ostracon (kivikild v√µi keraamika)", "Metall", "Puit"],
        correct: 1,
        image: images.scribe,
        explanation: "Ostraconid (lubjakivikillud v√µi potikillud) olid odavad ja k√§ttesaadavad, mist√µttu kasutati neid igap√§evaste m√§rkmete, arvepidamise ja joonistusharjutuste jaoks. Pap√º√ºrus oli kallis ja s√§√§steti t√§htsate tekstide jaoks.",
        wrongFeedback: {
          0: "Saviplaate kasutasid mesopotaamlased, egiptlased eelistasid teisi materjale.",
          2: "Metall oli liiga kallis ja raske kirjutamiseks.",
          3: "Puitu kasutati harva, peamiselt koolitahvlitena, mis kaeti kipsiga."
        }
      },
      {
        id: 'new_memphis_8', type: 'choice', location: 'memphis', difficulty: 1,
        question: "Kuidas nimetati Egiptuse kirja, mis t√§hendas kreeka keeles 'p√ºhad m√§rgid'?",
        options: ["Kiilkiri", "Hierogl√º√ºfid", "Ladina kiri", "Araabia kiri"],
        correct: 1,
        image: images.rosetta,
        explanation: "Hierogl√º√ºfid olid Egiptuse vanim kirjas√ºsteem, kus m√§rgid s√ºmboliseerisid nii m√µisteid kui ka h√§√§likuid. Neid kasutati peamiselt templite seintel ja religioossetes tekstides.",
        wrongFeedback: {
          0: "Kiilkiri oli Mesopotaamia rahvaste kiri, mida vajutati savisse.",
          2: "Ladina kiri tekkis alles tuhandeid aastaid hiljem Rooma riigis.",
          3: "Araabia kiri j√µudis Egiptusesse alles peale islamivallutusi 7. sajandil."
        }
      },
      {
        id: 'new_memphis_9', type: 'truefalse', location: 'memphis', difficulty: 2,
        question: "Vana-Egiptuse lapsed hakkasid koolis k√§ima juba 4-5 aastaselt, et √µppida kirjutajaks.",
        correct: true,
        image: images.scribe,
        explanation: "Kirjutajaks √µppimine oli raske ja kestis aastaid. Poisid alustasid √µpinguid varakult, harjutades sadu m√§rke ja rangeid reegleid.",
        treasure: "hieroglyph"
      },
      {
        id: 'new_memphis_bes', type: 'choice', location: 'memphis', difficulty: 2,
        question: "Millise Egiptuse kodukaitsja ja laste hoidja jumala j√§rgi on t√µen√§oliselt saanud nime Ibiza saar?",
        options: ["Anubis", "Bes", "Ptah", "Thoth"],
        correct: 1,
        image: images.bes,
        explanation: "Bes oli populaarne ka kreeklaste ja foiniiklaste seas. Ibiza nimi (Ebusus) t√§hendas 'Besi saart', kuna usuti, et sealne puuduv roomajate hulk on tema teenene."
      },
      {
        id: 'new_memphis_purity', type: 'choice', location: 'memphis', difficulty: 3,
        question: "Mitu korda p√§evas pidid Egiptuse preestrid end Herodotose j√§rgi k√ºlma veega pesema, et p√ºsida rituaalselt puhtad?",
        options: ["√úks kord", "Kaks korda", "Neli korda", "Seitse korda"],
        correct: 2,
        image: images.scribe,
        explanation: "Preestrid pidid j√§rgima rangeid reegleid: nad pesid end t√§ielikult kaks korda p√§eval ja kaks korda √∂√∂sel, raseerisid kogu keha ja kandsid vaid linaseid riideid."
      },
      {
        id: 'new_memphis_newyear', type: 'choice', location: 'memphis', difficulty: 2,
        question: "Millal algas Vana-Egiptuse kalendriaasta, t√§histades uue elu ja Niiluse t√µusu algust?",
        options: ["Jaanuaris", "M√§rtsis", "Juunis", "Septembris"],
        correct: 2,
        image: images.nile,
        explanation: "Egiptlaste uus aasta algas suvise p√∂√∂rip√§eva paiku (juunis), kui Niiluse vesi hakkas t√µusma, tuues endaga kaasa viljakat muda."
      },
      {
        id: 'new_memphis_10', type: 'choice', location: 'memphis', difficulty: 2,
        question: "Mis oli egiptlaste peamine jook, mida tarbisid nii lapsed kui t√§iskasvanud toidukorra k√µrvale?",
        options: ["Vein", "Piim", "√ïlu", "Kohv"],
        correct: 2,
        image: images.farmers,
        explanation: "√ïlu oli egiptlaste igap√§evane p√µhitoit. See oli paks ja toitv ning valmistati odrast v√µi nisust. See oli palju ohutum kui j√µe vesi.",
        wrongFeedback: {
          0: "Vein oli luksuskaup, mida nautisid peamiselt √ºlikud pidukoosviibimistel.",
          1: "Piim oli olemas, kuid see r√º√ºstus soojas kliimas kiiresti ja polnud peamine jook.",
          3: "Kohv avastati Etioopiast alles aastatuhandeid hiljem."
        }
      },
      {
        id: 'new_memphis_11', type: 'choice', location: 'memphis', difficulty: 2,
        question: "Millal ligikaudu √ºhendati √úlem- ja Alam-Egiptus √ºheks riigiks?",
        options: ["u 4000 eKr", "u 3100 eKr", "u 2500 eKr", "u 1500 eKr"],
        correct: 1,
        image: images.narmer,
        explanation: "Vana-Egiptuse riik ja tsivilisatsioon said alguse umbes 3100 eKr, kui esimene vaarao √ºhendas Niiluse oru ja delta."
      },
      {
        id: 'new_memphis_12', type: 'sorting', location: 'memphis', difficulty: 2,
        question: "Sorteeri Vana-Egiptuse ajaloo peamised riigiperioodid kronoloogiliselt!",
        options: ["Vana riik", "Keskmine riik", "Uus riik"],
        correct: [0, 1, 2],
        image: images.egypt_map,
        explanation: "Egiptuse ajalugu jaotatakse kolmeks hiilgeajaks: Vana riik (p√ºramiidide aeg), Keskmine riik ja Uus riik (suurriigi aeg)."
      },
      {
        id: 'new_memphis_13', type: 'multiSelect', location: 'memphis', difficulty: 3,
        question: "Vali vaarao peamised v√µimus√ºmbolid ja tunnused! (Vali 3 √µiget)",
        options: ["Topeltkroon", "K√§rus (kepp) ja piits", "V√µltshabe", "Raudr√º√º"],
        correct: [0, 1, 2],
        image: images.tutankhamun,
        explanation: "Vaarao v√µimu t√§histasid topeltkroon, peam√ºts nemes, k√µver kepp (k√§rus) ja piits ning rituaalne v√µltshabe."
      },
      {
        id: 'new_memphis_14', type: 'sorting', location: 'memphis', difficulty: 3,
        question: "Aseta √ºhiskonnagrupid paika Egiptuse sotsiaalses p√ºramiidis (alustades tipust)!",
        options: ["Vaarao", "Preestrid ja aadlikud", "S√µdurid ja ametnikud", "Talupojad ja k√§sit√∂√∂lised"],
        correct: [0, 1, 2, 3],
        image: images.scribe,
        explanation: "Egiptuse √ºhiskond oli rangelt hierarhiline, kus tipus oli jumalik vaarao ja k√µige suurema osa moodustasid talupojad, kelle t√∂√∂st riik elatus."
      },

      // ===================== GIZA (Pyramids) =====================
      {
        id: 'new_giza_1', type: 'written', location: 'giza', difficulty: 2,
        question: "Kes oli see vaarao, kellele ehitati Sakkara astmikp√ºramiid u 2700 eKr?",
        answer: ["d≈æoser", "djoser"],
        image: images.step_pyramid,
        explanation: "Varaseim suur p√ºramiid oli vaarao D≈æoseri astmikp√ºramiid Sakkaras, mille ehitas arhitekt Imhotep. See meenutas hiiglaslikku treppi taevasse ja t√§histas uue ajastu algust ehituskunstis.",
        treasure: "step_pyramid"
      },
      {
        id: 'new_giza_12', type: 'choice', location: 'giza', difficulty: 1,
        question: "Kuidas nimetati varasemat hauat√º√ºpi ‚Äì madalat lameda katusega tellisehitist, millest arenesid p√ºramiidid?",
        options: ["Tempel", "Mastaba", "Sarkofaag", "Obelisk"],
        correct: 1,
        image: images.step_pyramid,
        explanation: "Mastaba oli Vana-Egiptuse haua t√º√ºp, madal nelinurkne ehitis, mille kuju meenutas pinki. Nende √ºksteise peale ladumisest tekkisid esimesed astmikp√ºramiidid."
      },
      {
        id: 'new_giza_2', type: 'choice', location: 'giza', difficulty: 2,
        question: "Mida s√ºmboliseeris egiptlastele p√ºramiidi kuju lisaks hauale?",
        options: ["M√§ge", "P√§ikese ja p√§ikesekiiri", "Lootos√µit", "J√µge"],
        correct: 1,
        image: images.giza,
        explanation: "P√ºramiide v√µis m√µista kui p√§ikese s√ºmboleid ja nende servi kui kaldteid, mida m√∂√∂da p√§ikesejumala poeg (vaarao) taevasse t√µusis. See r√µhutas valitseja jumalikkust ja tagas maailmakorra toimimise.",
        wrongFeedback: {
          0: "Kuigi p√ºramiid meenutab m√§ge, oli religioosne t√§hendus seotud p√§ikese ja taevasse t√µusmisega.",
          2: "Lootos oli elu s√ºmbol, kuid p√ºramiidi kuju s√ºmboliseeris p√§ikesekiiri (benben-kivi).",
          3: "J√µge s√ºmboliseerisid siksakilised jooned, p√ºramiid kuulus kindlalt maapinnale ja taevasse suunatud tippu."
        }
      },
      {
        id: 'new_giza_3', type: 'choice', location: 'giza', difficulty: 2,
        question: "Millal ehitati Giza suured p√ºramiidid (Khufu, Khafre, Menkaure)?",
        options: ["3000‚Äì2900 eKr", "2600‚Äì2500 eKr", "1500‚Äì1400 eKr", "500 eKr"],
        correct: 1,
        image: images.giza,
        explanation: "Vana riigi ajal (ajavahemikus 2600‚Äì2500 eKr) ehitati Memphise l√§hedale Gizasse suurimad p√ºramiidid. Nendest Cheopsi (Khufu) p√ºramiid on √ºks seitsmest maailmaimest.",
        wrongFeedback: {
          0: "See on riigi √ºhendamise aeg, mil ehitati pigem mastabaid, mitte suuri p√ºramiide.",
          2: "See on Uue riigi aeg, mil eelistati kaljuhaudu Kuningate orus.",
          3: "Sel ajal oli Egiptus juba languses v√µi v√µ√µrv√µimu all, p√ºramiide enam ei ehitatud."
        }
      },
      {
        id: 'new_giza_4', type: 'identify', location: 'giza', difficulty: 1,
        question: "Milline m√º√ºtiline olend, vaarao pea ja l√µvi kehaga, valvab Giza p√ºramiide?",
        displayImage: images.sphinx,
        options: ["Grifoon", "Sfinks", "Anubis", "Muumia"],
        correct: 1,
        image: images.sphinx,
        explanation: "Suur Sfinks on hiiglaslik kaljusse raiutud kuju, mis kujutab vaarao Khafre n√§oga l√µvi. See s√ºmboliseeris valvurit ja p√§ikesejumalat.",
        wrongFeedback: {
          0: "Grifoon on m√º√ºtiline loom kulli pea ja l√µvi kehaga, levinud pigem Kreekas.",
          2: "Anubis on ≈°aakalipeaga jumal, keda Sfinks ei kujuta.",
          3: "Muumia on balsameeritud keha, mitte hiiglaslik kaljukuju."
        }
      },
      {
        id: 'new_giza_5', type: 'truefalse', location: 'giza', difficulty: 2,
        question: "Giza suured p√ºramiidid ehitati tegelikult orjade poolt, keda piitsutati t√∂√∂le.",
        correct: false,
        image: images.workers,
        explanation: "Uuemad arheoloogilised leiud n√§itavad, et p√ºramiide ehitasid vabad talupojad ja vilunud k√§sit√∂√∂lised. Nad said oma t√∂√∂ eest head s√º√ºa (liha, leiba) ja neile oli see auasi ehitada oma jumal-kuningale hauakambrit.",
        treasure: "pyramid"
      },
      {
        id: 'new_giza_6', type: 'choice', location: 'giza', difficulty: 2,
        question: "Millega olid Giza p√ºramiidid algselt kaetud, nii et need s√§rasid p√§ikese k√§es pimestavalt valgelt?",
        options: ["Kullaga", "H√µbedaga", "Valge lubjakiviga", "V√§rvilise saviga"],
        correct: 2,
        image: images.giza,
        explanation: "P√ºramiidid olid kaetud poleeritud valge lubjakiviga, mis peegeldas p√§ikesevalgust. T√§nap√§eval on sellest s√§ilinud v√§ike osa ainult Khafre p√ºramiidi tipus.",
        wrongFeedback: {
          0: "Ainult p√ºramiidi tipp (p√ºramidion) v√µis olla kullatud v√µi kullasulamiga kaetud.",
          1: "H√µbe oli Egiptuses haruldasem kui kuld ja seda ehituses ei kasutatud.",
          2: "Saviga kaeti pigem tavaliste inimeste p√§ikesekuivatatud tellistest maju."
        }
      },
      {
        id: 'new_giza_hotspot', type: 'hotspot', location: 'giza', difficulty: 2,
        question: "Leia ja kliki pildil Suurt Sfinksi!",
        image: images.giza,
        correct: { targetX: 75, targetY: 65, radius: 20 },
        explanation: "Suur Sfinks on hiiglaslik kuju, millel on l√µvi keha ja inimese pea. See valvab Giza p√ºramiidide l√§heduses."
      },
      {
        id: 'new_giza_7', type: 'written', location: 'giza', difficulty: 3,
        question: "Kui k√µrge oli Suur p√ºramiid (Cheopsi p√ºramiid) algselt meetrites (√ºmardatuna)?",
        answer: ["147", "146"],
        image: images.giza,
        explanation: "Cheopsi p√ºramiid oli algselt umbes 147 meetrit k√µrge ja p√ºsis maailma k√µrgeima ehitisena √ºle 3800 aasta kuni Lincolni katedraali valmimiseni Inglismaal."
      },
      {
        id: 'new_giza_8', type: 'choice', location: 'giza', difficulty: 2,
        question: "Mitu kiviplokki kulus Cheopsi p√ºramiidi ehitamiseks umbes?",
        options: ["100 000", "500 000", "√ºle 2 miljoni", "10 miljonit"],
        correct: 2,
        image: images.giza,
        explanation: "Arvutuste kohaselt koosneb Suur p√ºramiid umbes 2,3 miljonist kiviplokist, millest iga√ºks kaalub keskmiselt 2,5 tonni.",
        wrongFeedback: {
          0: "See arv on palju liiga v√§ike nii hiiglasliku ehitise jaoks.",
          1: "Isegi poole miljoni plokiga ei saaks nii suurt mahtu t√§ita.",
          3: "10 miljonit on liialdus, isegi antiikmaailma suurima ehitise kohta."
        }
      },
      {
        id: 'new_giza_9', type: 'truefalse', location: 'giza', difficulty: 2,
        question: "P√ºramiidid olid paigutatud t√§pselt ilmakaarte (p√µhi-l√µuna-ida-l√§√§s) j√§rgi.",
        correct: true,
        image: images.giza,
        explanation: "Egiptuse arhitektid kasutasid t√§htede liikumist, et orienteerida p√ºramiidide k√ºljed millimeetri t√§psusega ilmakaarte suunas.",
        treasure: "step_pyramid"
      },
      {
        id: 'new_giza_10', type: 'written', location: 'giza', difficulty: 3,
        question: "Kes oli arhitekt, kes kujundas esimese p√ºramiidi (D≈æoseri oma) ja keda hiljem kummardati kui meditsiini jumalat?",
        answer: ["imhotep"],
        image: images.step_pyramid,
        explanation: "Imhotep oli geniaalne mees ‚Äì vaarao vesiir, arhitekt and arst. Ta oli esimene teadaolev geenius inimajaloos, keda rahvas m√§letas tuhandeid aastaid."
      },
      {
        id: 'new_giza_11', type: 'choice', location: 'giza', difficulty: 2,
        question: "Mis oli mastaba egiptuse ajaloos?",
        options: ["Templi torn", "Madal ja lame hauakamber", "S√µjavanker", "Kullast ehe"],
        correct: 1,
        image: images.step_pyramid,
        explanation: "Mastaba oli varajane, tellistest ehitatud lame hauakamber. Just mastabate √ºksteise otsa ladumisest arenesid hiljem v√§lja esimesed p√ºramiidid."
      },
      {
        id: 'new_giza_12', type: 'written', location: 'giza', difficulty: 2,
        question: "Kes on see kolmas vaarao (lisaks Khufule ja Khafrele), kellele ehitati Giza kompleksi kolmas ja v√§ikseim p√ºramiid?",
        answer: ["menkaure", "mykerinos"],
        image: images.giza,
        explanation: "Giza kolm suurt p√ºramiidi kuulusid vaaraodele Khufu (Cheops), Khafre (Chefren) ja Menkaure (Mykerinos)."
      },

      // ===================== AMARNA (Religion Revolution) =====================
      {
        id: 'new_amarna_1', type: 'written', location: 'amarna', difficulty: 2,
        question: "Mis nime v√µttis Amenhotep IV, et austada ainujumalat Atonit?",
        answer: ["ehnaton", "akhenaten"],
        image: images.akhenaten,
        explanation: "Vaarao Amenhotep IV viis l√§bi usureformi, t√µstes peajumalaks p√§ikeseketta Atoni. Ta muutis oma nime Ehnatoniks ('Atonile kasulik') ja rajas uue pealinna Ahetatoni.",
        treasure: "sun_disk"
      },
      {
        id: 'new_amarna_2', type: 'choice', location: 'amarna', difficulty: 3,
        question: "Kuhu rajas Ehnaton oma uue pealinna Ahetatoni?",
        options: ["Niiluse deltasse", "Teeba ja Memphise vahele", "Sudaani piirile", "Punase mere √§√§rde"],
        correct: 1,
        image: images.amarna,
        explanation: "P√§√§semaks Amoni preestrite m√µju alt Teebas, rajas Ehnaton t√§iesti uue pealinna Ahetatoni ('Atoni silmapiir') Teeba ja Memphise vahele, kus varem polnud √ºhtegi p√ºhamut.",
        wrongFeedback: {
          0: "Deltas puudus vajalik eraldatus preestritest ja see oli liiga kauge keskmest.",
          2: "Sudaani piir (Nuubia) oli vallutatud ala, kuid pealinn pidi j√§√§ma Egiptuse s√ºdamesse.",
          3: "Egiptuse tsivilisatsioon oli suunatud Niilusele, mitte Punasele merele."
        }
      },
      {
        id: 'new_amarna_3', type: 'identify', location: 'amarna', difficulty: 1,
        question: "Kes on pildil olev kuulus kuninganna, Ehnatoni abikaasa?",
        displayImage: images.nefertiti,
        options: ["Nofretete", "Kleopatra", "Hat≈°epsut", "Nefertari"],
        correct: 0,
        explanation: "See on Nofretete (Nefertiti), Ehnatoni abikaasa ja kaasvalitseja. Teda kujutati kunstis sageli vaarao k√µrval v√µrdsena, mis oli tollal ebatavaline.",
        wrongFeedback: {
          1: "Kleopatra valitses sajandeid hiljem, Ptolemaioste ajal.",
          2: "Hat≈°epsut oli k√ºll kuulus naisvaarao, kuid elas ammu enne Amarna perioodi.",
          3: "Nefertari oli Ramses II armastatud peanaine, mitte Ehnatoni oma."
        }
      },
      {
        id: 'new_amarna_4', type: 'truefalse', location: 'amarna', difficulty: 2,
        question: "Amarna ajastu kunstis kujutati vaarao perekonda ebatavaliselt loomulikult ja inimlikult.",
        correct: true,
        image: images.akhenaten,
        explanation: "Amarna kunst murdis vanad reeglid. Vaaraod kujutati esimest korda koos oma naise ja t√ºtardega hellades ning argistes stseenides, mitte ainult kangete ja jumalikena.",
        treasure: "bust"
      },
      {
        id: 'new_amarna_5', type: 'fillin', location: 'amarna', difficulty: 2,
        question: "Ehnaton austas ainujumalat nimega _____, keda kujutati p√§ikesekettana.",
        answer: ["aton", "aten"],
        image: images.aten,
        explanation: "Atonit kujutati p√§ikesekettana, mille kiired l√µppesid v√§ikeste k√§tega, mis ulatasid vaaraole elus√ºmbolit - ankh'i."
      },
      {
        id: 'new_amarna_6', type: 'choice', location: 'amarna', difficulty: 2,
        question: "Mis oli Tutanhamoni esialgne nimi enne vana usundi taastamist?",
        options: ["Tutanhamon", "Tutanhaton", "Amenhotep", "Thutmosis"],
        correct: 1,
        image: images.tutankhamun,
        explanation: "Lapsvaarao s√ºndis nimega Tutanhaton ('Atoni elav kuju'), kuid peale isa Ehnatoni surma ja Amoni kultuse taastamist muutis ta nime Tutanhamoniks.",
        wrongFeedback: {
          0: "Tutanhamon oli nimi, mille ta v√µttis hiljem Amoni austamiseks.",
          2: "Amenhotep oli tema vanaisa ja ka isa algne nimi.",
          3: "Thutmosis oli hoopis teise d√ºnastia tuntuim vallutaja."
        }
      },
      {
        id: 'new_amarna_7', type: 'truefalse', location: 'amarna', difficulty: 2,
        question: "Atonit, Amarna ajastu ainujumalat, kujutati inimkujulisena nagu teisi jumalaid.",
        correct: false,
        image: images.aten,
        explanation: "Atonit kujutati abstraktselt p√§ikeseketta ja kiirtena, mitte aga inimese v√µi loomana. See oli suur muutus v√µrreldes varasema Egiptuse kunstiga.",
        treasure: "sun_disk"
      },
      {
        id: 'new_amarna_8', type: 'written', location: 'amarna', difficulty: 3,
        question: "Mida t√§histab Ehnatoni nimi t√µlkes (Atonile...)?",
        answer: ["kasulik", "meelep√§rane"],
        image: images.akhenaten,
        explanation: "Ehnaton (Akhenaten) t√§hendas 'Atonile kasulik' v√µi 'Atonile meelep√§rane'."
      },
      {
        id: 'new_amarna_9', type: 'choice', location: 'amarna', difficulty: 2,
        question: "Mis juhtus Ahetatoni linnaga p√§rast Ehnatoni surma?",
        options: ["See j√§i pealinnaks", "See h√ºljati ja j√§eti liiva k√§tte", "See ehitati templiks", "Sellest sai turg"],
        correct: 1,
        image: images.amarna,
        explanation: "J√§rgnevad vaaraod ja preestrid p√º√ºdisid Ehnatoni nime ajaloost kustutada. Uus pealinn h√ºljati ning √µukond kolis tagasi Teebasse ja Memphisesse.",
        wrongFeedback: {
          0: "Pealinn kolis kohe p√§rast Ehnatoni surma tagasi traditsioonilistesse keskustesse.",
          2: "Linna hooneid hoopis lammutati, et kasutada kive teiste ehitiste jaoks.",
          3: "Linn j√§i t√§iesti t√ºhjaks ja mattus sajanditeks k√µrbe liiva alla."
        }
      },
      {
        id: 'new_amarna_10', type: 'identify', location: 'amarna', difficulty: 2,
        question: "See on ainus Amarna ajastul lubatud jumal ‚Äì p√§ikeseketas.",
        displayImage: images.aten,
        options: ["Amon", "Aton", "Ra", "Osiris"],
        correct: 1,
        image: images.aten,
        explanation: "Aton oli p√§ikeseketas ise, keda peeti maailma loojaks ja √ºlalhoidjaks. Ehnaton keelas k√µigi teiste jumalate kummardamise.",
        wrongFeedback: {
          0: "Amon oli jumal, kelle v√µimu ja rikkuse vastu Ehnaton just v√µitles.",
          2: "Ra oli vana p√§ikesejumal, keda Ehnaton p√º√ºdis Atoniga asendada.",
          3: "Osiris oli surnute jumal, kelle kultus keelati Ehnatoni ajal ajutiselt."
        }
      },

      // ===================== ABYDOS (Afterlife & Gods) =====================
      {
        id: 'new_abydos_1', type: 'choice', location: 'abydos', difficulty: 2,
        question: "Miks asus egiptlaste uskumuste kohaselt surnute riik l√§√§nes?",
        options: ["Sest seal oli meri", "Sest seal loojus p√§ike", "Sest seal oli v√§hem inimesi", "Sest seal oli k√µrb"],
        correct: 1,
        image: images.osiris,
        explanation: "Egiptlased seostasid p√§ikese igap√§evast teekonda eluringiga. P√§ikese s√ºnnikoht oli idas ja loojumispaik l√§√§nes t√§histas surma ning p√§√§su allmaailma. Seet√µttu rajati enamik hauakambreid Niiluse l√§√§nekaldale.",
        wrongFeedback: {
          0: "Meri asus p√µhjas ja idas, kuid l√§√§nesuund oli seotud just p√§ikese loojumisega.",
          2: "Inimeste arv polnud oluline, m√§√§rav oli religioosne s√ºmbolism.",
          3: "K√µrb √ºmbritses Egiptust igast k√ºljest, kuid l√§√§s oli 'surnute pool' p√§ikese t√µttu."
        }
      },
      {
        id: 'new_abydos_2', type: 'choice', location: 'abydos', difficulty: 3,
        question: "Mida t√§histas egiptlaste jaoks 'S√ºdame kaalumise tseremoonia' allmaailmas?",
        options: ["Inimese kehakaalu kontrolli", "Kohtum√µistmist elus tehtud tegude √ºle", "Muumia ettevalmistamist", "Jumalate toitmist"],
        correct: 1,
        image: images.weighing_heart,
        explanation: "Osirise kohtus kaaluti surnu s√ºdant t√µe jumalanna Maati sule vastu. Kui s√ºda oli rasketest pattudest kerge, p√§√§ses hing igavese ellu (Earu v√§ljadele). Kui s√ºda oli sulest raskem, neelas selle koletis Ammut.",
        wrongFeedback: {
          0: "See polnud f√º√ºsiline kaalumine, vaid moraalne and religioosne kohtum√µistmine.",
          2: "Muumia valmistati maa peal enne matuseid, tseremoonia toimus juba teispoolsuses.",
          3: "Toiduohvreid toodi templites ja haudades, kohtus aga otsustati hinge saatus."
        }
      },
      {
        id: 'new_abydos_3', type: 'written', location: 'abydos', difficulty: 2,
        question: "Kes oli ≈°aakalipeaga jumal, kes valvas palsameerimist ja juhatas surnuid kohtusse?",
        answer: ["anubis"],
        image: images.anubis,
        explanation: "Anubis oli muumiaid kaitsev jumal. Just tema oli see, kes m√ºtoloogia j√§rgi valmistas esimese muumia (Osirise) ja valvas seej√§rel k√µiki surnuaedu.",
        treasure: "anubis"
      },
      {
        id: 'new_abydos_4', type: 'truefalse', location: 'abydos', difficulty: 1,
        question: "Palsameerimise k√§igus eemaldati kehast k√µik siseelundid, kaasa arvatud s√ºda.",
        correct: false,
        image: images.canopic_jars,
        explanation: "Enamik siseelundeid eemaldati ja pandi kanoopidesse, kuid s√ºda j√§eti kehasse. Egiptlased uskusid, et s√ºda on m√µistuse ja tunnete asupaik ning seda l√§heb vaja allmaailma kohtus.",
        treasure: "heart"
      },
      {
        id: 'new_abydos_5', type: 'fillin', location: 'abydos', difficulty: 2,
        question: "Kuidas nimetati tekstide kogu, mis andis surnule kaasa loitse ja juhiseid allmaailmas toimetulekuks?",
        answer: ["surnuteraamat"],
        image: images.book_dead,
        explanation: "Surnuteraamat sisaldas vajalikke loitse, et peletada koletisi ja osata vastata jumalate k√ºsimustele allmaailma v√§ravates."
      },
      {
        id: 'sort_abydos_1', type: 'sorting', location: 'abydos', difficulty: 3,
        question: "Sorteeri mumifitseerimise etapid √µigesse j√§rjekorda!",
        options: ["Siseelundite eemaldamine", "Keha kuivatamine natronis", "Keha v√µidmine √µlidega", "Linastesse m√§histesse m√§hkimine"],
        correct: [0, 1, 2, 3],
        image: images.mummy,
        explanation: "Palsameerimine kestis kokku umbes 70 p√§eva. See oli p√ºha rituaal, kus keha valmistati ette igaveseks eluks.",
        treasure: "mummy"
      },
      {
        id: 'new_abydos_6', type: 'choice', location: 'abydos', difficulty: 2,
        question: "Kes oli m√ºtoloogia j√§rgi esimene kuningas ja kes hiljem valitses surnute riiki?",
        options: ["Ra", "Osiris", "Horus", "Seth"],
        correct: 1,
        image: images.osiris,
        explanation: "Osiris oli tsivilisatsiooni tooja ja kuningas, kelle kade vend Seth tappis. T√§nu oma naisele Isisele √§rkas ta ellu ning temast sai igavese elu ja surnute riigi kuningas.",
        wrongFeedback: {
          0: "Ra oli p√§ikesejumal ja maailma esimene valitseja, kuid surnute riiki valitses Osiris.",
          2: "Horus oli Osirise poeg, kes valitses elusate inimeste √ºle p√§rast Sethi alistamist.",
          3: "Seth oli kaose ja tormide jumal, keda seostati kurjusega."
        }
      },
      {
        id: 'new_abydos_7', type: 'written', location: 'abydos', difficulty: 2,
        question: "Kuidas nimetati egiptlaste nimekaitsjat (kartussi), kuhu kirjutati vaarao nimi hierogl√º√ºfidega?",
        answer: ["shenu", "kartuss"],
        image: images.rosetta,
        explanation: "Vaarao nimi √ºmbritseti ellipsiga, mis s√ºmboliseeris igavikku ja kaitset. Seda tuntakse ka nime all kartuss."
      },
      {
        id: 'new_abydos_8', type: 'identify', location: 'abydos', difficulty: 2,
        question: "Nendes anumates s√§ilitati surnu siseelundeid.",
        displayImage: images.canopic_jars,
        options: ["Sarkofaagid", "Kanoobid", "Amforad", "Vaasid"],
        correct: 1,
        image: images.canopic_jars,
        explanation: "Kanoobid olid neli anumat, mille kaaned kujutasid Horuse poegi (ahv, ≈°aakal, kull ja inimene). Need hoidsid maksa, kopse, magu ja soolikaid.",
        wrongFeedback: {
          0: "Sarkofaag oli v√§limine kirst, kuhu asetati muumia ise.",
          2: "Amforad olid suured savin√µud peamiselt veini v√µi √µli hoidmiseks.",
          3: "Tavalised vaasid ei olnud rituaalselt siseelundite hoidmisega seotud."
        }
      },
      {
        id: 'new_abydos_9', type: 'truefalse', location: 'abydos', difficulty: 2,
        question: "Egiptlased uskusid, et inimesel on mitu hinge osa, √ºks neist oli 'Ka', mis vajas hauas toitu.",
        correct: true,
        image: images.mummy,
        explanation: "Ka oli inimese eluj√µud v√µi 'teisik'. Seet√µttu viisid sugulased hauakambrisse reaalset toitu ja jooki, et surnu vaim n√§lga ei j√§√§ks.",
        treasure: "djed"
      },
      {
        id: 'new_abydos_10', type: 'choice', location: 'abydos', difficulty: 1,
        question: "Milline on egiptuse elu s√ºmbol (rist, millel on silmus √ºlal)?",
        options: ["Ankh", "Skarabeus", "F√∂√∂niks", "Obelisk"],
        correct: 0,
        image: images.ra,
        explanation: "Ankh oli elu ja surematuse s√ºmbol. Jumalaid kujutati sageli hoidmas ankh'i inimeste nina ees, et anda neile 'elu hinge√µhku'.",
        wrongFeedback: {
          1: "Skarabeus oli pigem uuestis√ºnni ja p√§ikese s√ºmbol, mitte rist.",
          2: "F√∂√∂niks (egiptlaste Bennu) oli haruldane lind, mitte s√ºmbol-rist.",
          3: "Obelisk on ehitis, √ºheainsast kiviplokist sammas."
        }
      },
      {
        id: 'new_abydos_11', type: 'matching', location: 'abydos', difficulty: 3,
        question: "√úhenda hinge osa ja selle t√§hendus!",
        options: {
          left: ["Ka", "Ba"],
          right: ["Eluj√µud ja energia", "Isiksus ja hing"]
        },
        correct: [0, 1],
        image: images.osiris,
        explanation: "Egiptlased uskusid, et inimene koosneb mitmest osast. 'Ka' oli eluj√µud, mis vajas toitu, ja 'Ba' oli isiksus, mis v√µis linnuna haust v√§lja lennata."
      },
      {
        id: 'new_abydos_15', type: 'choice', location: 'abydos', difficulty: 2,
        question: "Kes oli Egiptuse m√ºtoloogia j√§rgi kurja kehastus ja Osirise vend, kes ta tappis?",
        options: ["Horus", "Anubis", "Seth", "Thoth"],
        correct: 2,
        image: images.seth,
        explanation: "Seth oli kaose ja tormide jumal, kes tappis oma venna Osirise. Hiljem v√µitis Osirise poeg Horus Sethi ja temast sai vaaraode kaitsja."
      },
      {
        id: 'new_abydos_12', type: 'choice', location: 'abydos', difficulty: 2,
        question: "Mitu p√§eva kestis tavaliselt keha kuivatamine natronis (soolas) muumifitseerimise ajal?",
        options: ["10 p√§eva", "40 p√§eva", "70 p√§eva", "1 aasta"],
        correct: 1,
        image: images.mummy,
        explanation: "Keha kuivatamine natronis kestis t√§pselt 40 p√§eva. See oli protsessi k√µige olulisem osa, et eemaldada niiskus ja peatada lagunemine."
      },
      {
        id: 'new_abydos_13', type: 'multiSelect', location: 'abydos', difficulty: 3,
        question: "Millised organid pandi palsameerimisel eraldi kanoop-anumatesse? (Vali 2 √µiget)",
        options: ["Maks", "Kopsud", "S√ºda", "Aju"],
        correct: [0, 1],
        image: images.canopic_jars,
        explanation: "Kanoopidesse pandi maks, kopsud, magu ja sooled. S√ºda j√§eti kehasse ja aju visati tavaliselt minema, kuna peeti seda kasutuks."
      },

      // ===================== TEEBA (New Kingdom & Gods) =====================
      // ===================== TEEBA (New Kingdom & Power) =====================
      {
        id: 'new_teeba_1', type: 'choice', location: 'teeba', difficulty: 2,
        question: "Millise vaarao ajal saavutas Egiptuse suurriik oma suurima ulatuse?",
        options: ["Ramses II", "Thutmosis III", "Hat≈°epsut", "Ehnaton"],
        correct: 1,
        image: images.luxor,
        explanation: "Uue riigi ajal sai Egiptusest t√µeline suurriik. Oma v√µimsuse tipu ja suurima ulatuse saavutas see vaarao Thutmosis III ajal (valitses 1468‚Äì1436 eKr), kes alistas S√º√ºria ja Palestiina.",
        wrongFeedback: {
          0: "Ramses II oli k√ºll v√§ga v√µimas ja ehitas palju, kuid territoorium ei √ºletanud Thutmosis III oma.",
          2: "Hat≈°epsut keskendus pigem kaubandusele ja ehitustele kui maadevallutustele.",
          3: "Ehnatoni ajal kaotas Egiptus hoopis palju oma v√§lispoliitilisest m√µjust ususegaduste t√µttu."
        }
      },
      {
        id: 'new_teeba_2', type: 'written', location: 'teeba', difficulty: 3,
        question: "Kellega s√µlmis Ramses II p√§rast Kadeshi lahingut maailma esimese rahulepingu?",
        answer: ["hetiitidega", "hetiidi kuningaga"],
        image: images.ramses_ii,
        explanation: "P√§rast raskeid ja veriseid lahinguid s√µlmis Ramses II hetiitidega rahulepingu, millega jaotati m√µjupiirkonnad: Palestiina j√§i Egiptusele, P√µhja-S√º√ºria aga hetiitidele."
      },
      {
        id: 'new_teeba_3', type: 'identify', location: 'teeba', difficulty: 2,
        question: "Milline naine valitses Egiptust vaaraona, kandes isegi valehabet?",
        displayImage: images.hatshepsut,
        options: ["Hat≈°epsut", "Kleopatra", "Nofretete", "Tiyi"],
        correct: 0,
        explanation: "Hat≈°epsut oli √ºks v√§heseid naisi, kes ametlikult vaaraoks kuulutati. Ta eelistas rahuaega, arendas kaubandust (nt ekspeditsioon Punti maale) ja p√ºstitas hiiglaslikke obeliske.",
        wrongFeedback: {
          1: "Kleopatra oli valitseja, kuid tema ei kandnud vaarao traditsioonilisi tunnuseid nagu valehabe sel viisil.",
          2: "Nofretete oli kaasvalitseja, kuid pole kindel, kas ta kunagi vaarao tiitlit √ºksi kandis.",
          3: "Tiyi oli Amenhotep III naine ja v√§ga m√µjukas, kuid polnud ametlikult vaarao."
        }
      },
      {
        id: 'new_teeba_4', type: 'truefalse', location: 'teeba', difficulty: 2,
        question: "Uue riigi ajal loobusid egiptlased p√ºramiidide ehitamisest hauar√∂√∂vlite hirmu t√µttu.",
        correct: true,
        image: images.valley_kings,
        explanation: "Kuna p√ºramiidid torkasid kaugele silma, r√º√ºstati need kiiresti. Uue riigi vaaraod otsustasid end matta peidetud ja raskesti ligip√§√§setavasse kohta - Kuningate orgu Teeba l√§hedal.",
        treasure: "feather"
      },
      {
        id: 'new_teeba_5', type: 'choice', location: 'teeba', difficulty: 1,
        question: "Kes oli Uue riigi peajumal, keda austati Teebas?",
        options: ["Amon-Ra", "Osiris", "Anubis", "Bes"],
        correct: 0,
        image: images.ra,
        explanation: "Amon oli algselt Teeba piirkonna jumal, kuid Uue riigi ajal √ºhendati ta p√§ikeseketta Raga, moodustades Amon-Ra - jumalate kuninga."
      },
      {
        id: 'new_teeba_6', type: 'choice', location: 'teeba', difficulty: 2,
        question: "Milline relv, mida vedasid hobused, muutis Uue riigi s√µjapidamise palju kiiremaks ja surmavamaks?",
        options: ["S√µjalaev", "S√µjavanker", "Katapult", "Elevandid"],
        correct: 1,
        image: images.war_chariot,
        explanation: "Egiptlased v√µtsid s√µjavankrid ja hobused √ºle h√ºksidelt. See v√µimaldas neil luua hiiglasliku impeeriumi, ulatudes Eufrati j√µeni kirdes ja kaugele l√µunasse.",
        wrongFeedback: {
          0: "Egiptusel oli tugev laevastik, kuid Niilusel, mitte peamise maismaarelvana.",
          2: "Katapulte egiptlased sel ajal veel ei kasutanud, need tulid hiljem.",
          3: "S√µjaelevante kasutasid alles palju hiljem ptolemaioste d√ºnastia valitsejad."
        }
      },
      {
        id: 'new_teeba_7', type: 'written', location: 'teeba', difficulty: 3,
        question: "Kuidas nimetati salap√§rast 'Jumala maad' kagus, kuhu Hat≈°epsut saatis suure kaubandusekspeditsiooni?",
        answer: ["punt", "punti maa"],
        image: images.hatshepsut,
        explanation: "Ekspeditsioon Punti maale t√µi Egiptusesse viirukit, m√ºrri, kulda, eebenipuud ja isegi eksootilisi loomi, nagu paavianid ja leopardid."
      },
      {
        id: 'new_teeba_8', type: 'truefalse', location: 'teeba', difficulty: 2,
        question: "Vana-Egiptuse naistel oli √µigus omada vara, algatada lahutust ja p√§rida maad.",
        correct: true,
        image: images.nefertiti,
        explanation: "Erinevalt paljudest teistest antiikaja √ºhiskondadest (nt Kreeka), oli egiptuse naistel seaduse ees peaaegu samad √µigused kui meestel.",
        treasure: "crook"
      },
      {
        id: 'new_teeba_9', type: 'choice', location: 'teeba', difficulty: 2,
        question: "Kes oli vaarao peamine n√µuandja ja riigi 'tegevjuht', kes kontrollis makse ja kohtuid?",
        options: ["Preester", "Vesiir", "Kirjutaja", "Kindral"],
        correct: 1,
        image: images.scribe,
        explanation: "Vesiir oli vaarao parem k√§si, kes vastutas igap√§evase riigivalitsemise eest. Sageli oli ta ka k√µrgeim kohtunik.",
        wrongFeedback: {
          0: "√úlempreestritel oli suur v√µim, kuid nad tegelesid peamiselt usuliste asjadega.",
          2: "Kirjutajaid oli palju ja nad t√§itsid vesiiri k√§ske, kuid neil ei olnud nii k√µrget rolli.",
          3: "Kindralid juhtisid s√µjav√§ge, kuid riigi siseasju ja makse kontrollis vesiir."
        }
      },
      {
        id: 'new_teeba_10', type: 'identify', location: 'teeba', difficulty: 2,
        question: "Milline on Teeba linna s√ºmbol ‚Äì m√ºtoloogiline lind, kes t√§histas uut algust?",
        displayImage: images.ra,
        options: ["Ibis", "Bennu (F√∂√∂niks)", "Pistrik", "Pelikan"],
        correct: 1,
        image: images.ra,
        explanation: "Bennu-lind (keda kreeklased kutsusid f√∂√∂niksiks) s√ºmboliseeris p√§ikeset√µusu ja uue elu algust. Arvati, et ta s√ºnnib iseenda tuhast uuesti.",
        wrongFeedback: {
          0: "Ibis oli tarkusejumal Thoti s√ºmbol.",
          2: "Pistrik oli taevajumal Horuse ja vaarao v√µimu s√ºmbol.",
          3: "Pelikan oli egiptlaste jaoks m√ºtoloogiline, kuid mitte Teeba peamine s√ºmbol."
        }
      },
      {
        id: 'new_teeba_11', type: 'written', location: 'teeba', difficulty: 3,
        question: "Mis oli selle v√µ√µra rahva nimi, kes vallutas Egiptuse u u 1650 eKr ja t√µi kaasa s√µjavankrid?",
        answer: ["h√ºksosed", "hyksos"],
        image: images.war_chariot,
        explanation: "H√ºksosed (karjaste kuningad) valitsesid Egiptust √ºle saja aasta. Nende v√§ljaajamine t√§histas Uue riigi algust ja Egiptuse saamist suurriigiks."
      },
      {
        id: 'new_teeba_12', type: 'choice', location: 'teeba', difficulty: 2,
        question: "Millise kuulsa lahingu pidas Ramses II hetiitidega, mis viis maailma esimese rahulepinguni?",
        options: ["Megiddo lahing", "Kadeshi lahing", "Aktioni lahing", "Gaugamela lahing"],
        correct: 1,
        image: images.ramses_ii,
        explanation: "Kadeshi lahing (u 1274 eKr) oli √ºks suurimaid s√µjavankrite lahinguid ajaloos. Kuigi m√µlemad poole pidasid end v√µitjaks, j√§rgnes sellele ajaloo esimene kirjalik rahuleping."
      },

      // ===================== KARNAK (Temples & Rituals) =====================
      {
        id: 'new_karnak_1', type: 'choice', location: 'karnak', difficulty: 2,
        question: "Milline oli Egiptuse templite peamine √ºlesanne?",
        options: ["Rahva kogunemispaik", "Jumala maapealne kodu", "Kool lastele", "Turg"],
        correct: 1,
        image: images.karnak,
        explanation: "Templit ei peetud mitte kogunemispaigaks, vaid jumala elupaigaks maa peal. Ainult vaarao ja preestrid tohtisid siseneda templi k√µige p√ºhamasse ossa, et hoolitseda jumalakuju eest (teda pesta, riietada ja toita).",
        wrongFeedback: {
          0: "Erinevalt t√§nap√§eva kirikutest ei k√§inud rahvas templi sees palvetamas; nad ootasid √µues.",
          2: "Kuigi templite juures v√µisid olla koolid (elumaja), oli templi p√µhi√ºlesanne usuline teenistus.",
          3: "Turg v√µis olla templi m√º√ºride taga, kuid tempel ise oli p√ºha ja puutumatu paik."
        }
      },
      {
        id: 'new_karnak_2', type: 'written', location: 'karnak', difficulty: 2,
        question: "Kuidas nimetatakse hiiglaslikku, √ºheks kiviplokist raiutud ja kullatud tipuga kivisammast?",
        answer: ["obelisk"],
        image: images.karnak,
        explanation: "Obeliskid s√ºmboliseerisid tardunud p√§ikesekiirt. Need p√ºstitati tavaliselt paarikaupa templite sissep√§√§sude juurde, et austada p√§ikesejumalat. Suurimad neist kaalusid sadu tonne.",
        treasure: "column"
      },
      {
        id: 'new_karnak_3', type: 'identify', location: 'karnak', difficulty: 2,
        question: "Kes oli see tarkuse, teaduse ja kirjakunsti jumal, keda kujutati ibis-linnu peaga?",
        displayImage: images.thoth,
        options: ["Thot", "Anubis", "Horus", "Ra"],
        correct: 0,
        image: images.thoth,
        explanation: "Thot oli jumalate kirjutaja and maagia valdaja. Arvati, et just tema andis inimestele hierogl√º√ºfid ja √µpetas neile astronoomiat ning matemaatikat.",
        wrongFeedback: {
          1: "Anubis on ≈°aakalipeaga ja seotud surnutega, mitte kirjakunstiga.",
          2: "Horus on pistrikupeaga ja s√ºmboliseerib taevast ning kuningav√µimu.",
          3: "Ra on p√§ikesejumal, keda kujutati tihti kullipeaga ja p√§ikesekettaga."
        }
      },
      {
        id: 'new_karnak_4', type: 'choice', location: 'karnak', difficulty: 1,
        question: "Milline lind s√ºmboliseeris taevast ja kuningav√µimu ning oli vaarao kaitsja?",
        options: ["Ibis", "Pistrik", "Hani", "Pelikan"],
        correct: 1,
        image: images.horus,
        explanation: "Pistrikkujuline jumal Horus oli vaarao taevane v√µrdkuju. Iga elav vaarao kandis tiitlit 'Elav Horus'.",
        treasure: "eye"
      },
      {
        id: 'new_karnak_5', type: 'fillin', location: 'karnak', difficulty: 3,
        question: "Milline mardikas s√ºmboliseeris egiptlastele p√§ikese liikumist ja uuestis√ºndi?",
        answer: ["skarabeus", "scarab"],
        image: images.scarab,
        explanation: "Skarabeus (sitamardikas) veerev s√µnnikupall meenutas egiptlastele p√§ikeseketta liikumist √ºle taeva. Teda peeti uue elu ja √µnne s√ºmboliks.",
        treasure: "scarab_amulet"
      },
      {
        id: 'new_karnak_6', type: 'choice', location: 'karnak', difficulty: 2,
        question: "Kuidas nimetati Karnaki templi hiiglaslikku sammassaali, kus on 134 hiiglaslikku sammast?",
        options: ["P√ºloon", "H√ºpost√º√ºlsaal", "Sarkofaag", "L√º√ºtium"],
        correct: 1,
        image: images.karnak,
        explanation: "H√ºpost√º√ºlsaal on √ºks antiikmaailma imesid. Selle suurimad sambad on 21 meetrit k√µrged ja piisavalt j√§medad, et 100 inimest saaks nende tipus seista.",
        wrongFeedback: {
          0: "P√ºloon on templi hiiglaslik v√§ravaehitis, mitte saal.",
          2: "Sarkofaag on kirst, mitte arhitektuurne saal.",
          3: "L√º√ºtium ei ole egiptuse ehituskunsti m√µiste."
        }
      },
      {
        id: 'new_karnak_7', type: 'truefalse', location: 'karnak', difficulty: 2,
        question: "Karnaki tempel oli p√ºhendatud ainult √ºhele jumalale ‚Äì Amonile.",
        correct: false,
        image: images.karnak,
        explanation: "Kuigi peajumal oli Amon, austati seal ka tema naist Muti ja poega Khonsut (Teeba kolmik). Neile k√µigile on seal eraldi p√ºhakojad.",
        treasure: "temple"
      },
      {
        id: 'new_karnak_8', type: 'written', location: 'karnak', difficulty: 2,
        question: "Milleks kasutasid preestrid templi juures asuvat 'P√ºha j√§rve'?",
        answer: ["rituaalne pesemine", "puhastumine"],
        image: images.karnak,
        explanation: "Preestrid pidid ennast neli korda p√§evas (kaks korda p√§eval ja kaks korda √∂√∂sel) p√ºha j√§rve vees pesema, et olla puhas jumalate teenimiseks."
      },
      {
        id: 'new_karnak_9', type: 'choice', location: 'karnak', difficulty: 2,
        question: "Kuidas nimetatakse templi v√§ravat, mis koosneb kahest hiiglaslikust ja lamedast tornist?",
        options: ["Obelisk", "P√ºloon", "Mastaba", "P√ºramiid"],
        correct: 1,
        image: images.karnak,
        explanation: "P√ºloonid olid templite monumentaalsed sissep√§√§sud, mis olid sageli kaunistatud vaaraode v√µidukaid lahinguid kujutavate reljeefidega.",
        wrongFeedback: {
          0: "Obelisk on kitsas sammas, mitte v√§ravaehitis.",
          2: "Mastaba oli Vana riigi aegne hauakamber, mitte templi v√§rav.",
          3: "P√ºramiid on kooniline ehitis, mitte tasapinnaline v√§rav."
        }
      },
      {
        id: 'new_karnak_10', type: 'identify', location: 'karnak', difficulty: 2,
        question: "See on tarkuse ja kirjutamise jumal, kes leiutas hierogl√º√ºfid.",
        displayImage: images.thoth,
        options: ["Horus", "Anubis", "Thot", "Sobek"],
        correct: 2,
        image: images.thoth,
        explanation: "Thoti peeti ka aja ja kuu valvuriks. Teda kujutati tavaliselt ibis-linnu peaga mehena, hoidmas kirjutusvahendeid.",
        wrongFeedback: {
          0: "Horus on pistrikupeaga taevajumal.",
          1: "Anubis on ≈°aakalipeaga surnute jumal.",
          3: "Sobek on krokodillipeaga Niiluse ja viljakuse jumal."
        }
      },
      {
        id: 'new_karnak_11', type: 'choice', location: 'karnak', difficulty: 3,
        question: "Umbes mitu erinevat m√§rki kuulus Vana-Egiptuse hierogl√º√ºfkirja s√ºsteemi selle hiilgeajal?",
        options: ["u 20", "u 100", "√ºle 700", "√ºle 5000"],
        correct: 2,
        image: images.hieroglyphs,
        explanation: "Egiptuse piltkiri oli v√§ga keeruline, koosnedes enam kui 700-st erinevast m√§rgist. Need v√µisid t√§histada nii h√§√§likuid, silpe kui ka terveid m√µisteid."
      },
      {
        id: 'new_karnak_12', type: 'choice', location: 'karnak', difficulty: 2,
        question: "Millal avastati kuulus Rosetta kivi, mis v√µimaldas hierogl√º√ºfe de≈°ifreerida?",
        options: ["1550 eKr", "1799 pKr", "1822 pKr", "1922 pKr"],
        correct: 1,
        image: images.rosetta,
        explanation: "Rosetta kivi leiti Napoleoni Egiptuse-retke ajal 1799. aastal. Alles 1822. aastal suutis Champollion selle abil kirja saladused murda."
      },
      {
        id: 'new_karnak_feeding', type: 'choice', location: 'karnak', difficulty: 2,
        question: "Mitu korda p√§evas pakkusid preestrid Karnaki templis Amon-Ra kujule s√º√ºa ja juua?",
        options: ["Korra p√§evas", "Kaks korda", "Kolm korda", "Ainult t√§iskuu ajal"],
        correct: 2,
        image: images.karnak,
        explanation: "Jumalad said toitu hommikul, keskp√§eval ja √µhtul. √úlempreester serveeris parimat leiba ja liha (n√§iteks hane v√µi tuvi)."
      },
      {
        id: 'new_karnak_sekhmet_legend', type: 'choice', location: 'karnak', difficulty: 2,
        question: "Millega v√§rvis Amon-Ra √µlle punaseks, et petta ja uinutada m√§ratsevat l√µvijumalanna Sehmetit?",
        options: ["Veiniga", "Verega", "Punase ookriga", "Granaat√µunaga"],
        correct: 2,
        image: images.sekhmet,
        explanation: "Legend r√§√§gib, et Sehmet m√§ratses inimkonda h√§vitades. Amon-Ra valas maa √ºle punase ookriga v√§rvitud √µllega, mida Sehmet pidas vereks ja j√µi end p√§√§stvalt purju."
      },
      {
        id: 'new_karnak_matching_gods', type: 'matching', location: 'karnak', difficulty: 3,
        question: "√úhenda jumal ja tema olemus/kuju!",
        options: {
          left: ["Bes", "Taweret", "Sehmet", "Amon-Ra"],
          right: ["K√§rbus ja kodukaitsja", "J√µehobu-s√ºnnitaja", "L√µvipea-tuline", "P√§ikese-kuningas"]
        },
        correct: [0, 1, 2, 3],
        image: images.bes,
        explanation: "Bes ja Taweret olid kodudes austatud kaitsjad, Sehmet ja Amon-Ra aga v√µimsad riiklikud jumalused."
      },
      {
        id: 'new_karnak_theodosius', type: 'choice', location: 'karnak', difficulty: 3,
        question: "Kes oli see Rooma keiser, kes aastal 384 pKr k√§skis k√µik Egiptuse templid sulgeda ja paganluse keelata?",
        options: ["Augustus", "Constantinus Suur", "Theodosius", "Nero"],
        correct: 2,
        image: images.rosetta,
        explanation: "Keiser Theodosius tegi kristlusest riigiusu ja k√§skis h√§vitada v√µi sulgeda k√µik vanad templid, t√§histades sellega Vana-Egiptuse religiooni l√µppu."
      },

      // ===================== KUNINGATE ORG (Tombs) =====================
      {
        id: 'new_valley_1', type: 'choice', location: 'kuningate_org', difficulty: 2,
        question: "Miks asutused p√ºramiidid Uue riigi ajal Kuningate oruga?",
        options: ["P√ºramiidid olid liiga v√§iksed", "Kivid said otsa", "R√º√ºstajate v√§ltimiseks ja kulude s√§√§stmiseks", "Usk keelustas ehitamise"],
        correct: 2,
        image: images.valley_kings,
        explanation: "Suurte p√ºramiidide rajamine oli riigile kurnav ja need olid hauar√º√ºstajate jaoks liiga m√§rgatavad. Uue riigi ajal asendati need kaljusse raiutud peidetud kambertega Kuningate orus Teeba l√§hedal.",
        wrongFeedback: {
          0: "P√ºramiidid olid hiiglaslikud, nende maht poleks kunagi probleemiks saanud.",
          1: "Paekivi oli Egiptuses piisavalt, loobutid just praktilistel p√µhjustel.",
          3: "Usk muutus (Amon-Ra), kuid matmiskombed muutusid just r√º√ºstamiste t√µttu."
        }
      },
      {
        id: 'new_valley_2', type: 'choice', location: 'kuningate_org', difficulty: 1,
        question: "Millise vaarao haud avastati 1922. aastal peaaegu puutumatuna?",
        options: ["Ramses II", "Ehnaton", "Tutanhamon", "Sethi I"],
        correct: 2,
        image: images.tutankhamun,
        explanation: "Tutanhamon oli noorelt surnud vaarao, kelle haud ununes r√º√ºstajate poolt. See andis arheoloogidele hindamatut teavet Egiptuse matmiskommete ja kunsti kohta.",
        treasure: "mask"
      },
      {
        id: 'new_valley_3', type: 'written', location: 'kuningate_org', difficulty: 2,
        question: "Kes oli see Briti arheoloog, kes leidis Tutanhamoni haua?",
        answer: ["howard carter"],
        image: images.howard_carter,
        explanation: "Howard Carter otsis Kuningate orus Tutanhamoni hauda aastaid. Tema avastus 1922. aastal on √ºks maailma kuulsamaid arheoloogilisi leide."
      },
      {
        id: 'new_valley_4', type: 'truefalse', location: 'kuningate_org', difficulty: 2,
        question: "Tutanhamon oli √ºks Vana-Egiptuse v√µimsamaid ja pikaajalisemaid valitsejaid.",
        correct: false,
        image: images.tutankhamun,
        explanation: "Vastupidi ‚Äì Tutanhamon valitses vaid l√ºhikest aega ja suri v√§ga noorelt (umbes 19-aastaselt). Ta sai kuulsaks ainult t√§nu sellele, et tema haud s√§ilis r√º√ºstamata.",
        treasure: "crook"
      },
      {
        id: 'new_valley_5', type: 'choice', location: 'kuningate_org', difficulty: 2,
        question: "Mida t√§histas Kuningate oru asukoht Niiluse l√§√§nekaldal?",
        options: ["P√§ikeset√µusu ja elu", "P√§ikeseloojangut ja surnute riiki", "P√µhjasuunda", "Viljakat maad"],
        correct: 1,
        image: images.valley_kings,
        explanation: "Kuna p√§ike loojus l√§√§nes, peeti seda suunda p√§√§suks teispoolsusse. Seet√µttu asusid peaaegu k√µik suured Egiptuse nekropolid (surnute linnad) j√µe l√§√§nekaldal.",
        wrongFeedback: {
          0: "Idakallas oli elavate p√§ralt, kus p√§ike t√µusis ja elu algas.",
          2: "Asukoht ei t√§histanud p√µhjasuunda, vaia p√§ikese vertikaalset teekonda.",
          3: "L√§√§nekallas oli sageli just k√µrbe algus, kus p√µlluharimine polnud v√µimalik, sobides seega matmispaigaks."
        }
      },
      {
        id: 'new_valley_6', type: 'choice', location: 'kuningate_org', difficulty: 2,
        question: "Kuidas nimetati spetsiaalset ehitajate k√ºla, kus elasid ja t√∂√∂tasid vaaraode haudade rajajad?",
        options: ["Memphis", "Deir el-Medina", "Karnak", "Giza"],
        correct: 1,
        image: images.workers,
        explanation: "Deir el-Medina oli kirjaoskajate k√§sit√∂√∂liste kogukond. T√§nu neile on meil palju teavet igap√§evaelust, sest nad j√§tsid maha tuhandeid kirjutisi (ostracone).",
        wrongFeedback: {
          0: "Memphis oli pealinn ja asus kaugel p√µhjas.",
          2: "Karnak oli tohutu templikompleks, mitte elumajade k√ºla.",
          3: "Giza on tuntud p√ºramiidide poolt, mis rajati hoopis varem."
        }
      },
      {
        id: 'new_valley_7', type: 'truefalse', location: 'kuningate_org', difficulty: 2,
        question: "Rituaali, kus preester 'avas' surnu meeled, et ta saaks teispoolsuses s√º√ºa ja r√§√§kida, nimetati 'Suu avamise tseremooniaks'.",
        correct: true,
        image: images.mummy,
        explanation: "See oli √ºks t√§htsamaid matuserituaale. Preester puudutas spetsiaalse t√∂√∂riistaga muumia v√µi kuju suud, silmi ja k√µrvu, et √§ratada need uueks eluks.",
        treasure: "anubis"
      },
      {
        id: 'new_valley_8', type: 'written', location: 'kuningate_org', difficulty: 3,
        question: "Kuidas nimetasid egiptlased oma haudu, mis pidid kestma igavesti?",
        answer: ["igaviku maja"],
        image: images.valley_kings,
        explanation: "Haud oli egiptlase jaoks 'igaviku maja'. Kui tavalised elumajad ehitati savitellistest, siis hauad raiuti kivisse v√µi ehitati kivist, et need ei h√§viks."
      },
      {
        id: 'new_valley_9', type: 'choice', location: 'kuningate_org', difficulty: 2,
        question: "Mis oli peamine p√µhjus, miks hauad Kuningate orus vaatamata valvuritele ja peitmisele ikkagi r√º√ºstati?",
        options: ["Vargad olid n√§htamatud", "Sisemine info ja korruptsioon", "Jumalate needus", "Maav√§rinad"],
        correct: 1,
        image: images.valley_kings,
        explanation: "Haur√º√ºsteid juhtisid sageli samad ametnikud ja preestrid, kes haudu hooldasid. Majanduskriiside ajal muutus kuld ja aarded haudades liiga ahvatlevaks.",
        wrongFeedback: {
          0: "Vargad olid t√§iesti tavalised inimesed, sageli just vaesed k√ºlaelanikud.",
          2: "Needus pidi vargaid eemale peletama, kuid n√§lja ja ahnuse vastu see ei aidanud.",
          3: "Maav√§rinad v√µisid haudu kahjustada, kuid aarded viisid minema ikka inimesed."
        }
      },
      {
        id: 'new_valley_10', type: 'identify', location: 'kuningate_org', difficulty: 2,
        question: "See on maailma tuntud Tutanhamoni kuldne mask.",
        displayImage: images.tutankhamun,
        options: ["Ramsese mask", "Tutanhamoni mask", "Osirise kuju", "Sfinksi pea"],
        correct: 1,
        image: images.tutankhamun,
        explanation: "Mask on valmistatud puhtast kullast ja kaalub √ºle 10 kilogrammi. See s√ºmboliseerib vaarao muutumist jumalikuks olendiks p√§rast surma.",
        wrongFeedback: {
          0: "Ramses II maske on leitud, kuid need pole nii kuulsad kui Tutanhamoni oma.",
          2: "Osirise kujusid pandi hauda kaasa, kuid see ese on just vaarao n√§omask.",
          3: "Sfinks on hiiglaslik kaljukuju Giza k√µrbes."
        }
      },
      {
        id: 'new_valley_11', type: 'choice', location: 'kuningate_org', difficulty: 2,
        question: "Millal valitses ligikaudu lapsvaarao Tutanhamon, kelle haud leiti 1922. aastal puutumatuna?",
        options: ["u 3100 eKr", "u 2500 eKr", "u 1332-1323 eKr", "u 30 eKr"],
        correct: 2,
        image: images.tutankhamun,
        explanation: "Tutanhamon valitses Uue riigi ajal, umbes aastatel 1332‚Äì1323 eKr. Kuigi ta oli l√ºhikest aega valitsenud kuningas, tegi leid talle maailmakuulsaks."
      },


      // ===================== ABU SIMBEL & FINAL ERA (Ramses & End) =====================
      {
        id: 'new_abu_1', type: 'choice', location: 'abu_simbel', difficulty: 2,
        question: "Kes lasi Abu Simbeli templid kaljusse raiuda kui m√§lestusm√§rgi endale ja kuninganna Nefertarile?",
        options: ["Tutanhamon", "Ramses II", "Ehnaton", "Hat≈°epsut"],
        correct: 1,
        image: images.abu_simbel,
        explanation: "Ramses II valitses Egiptust 66 aastat (1279‚Äì1213 eKr). Ta ehitas rohkem templeid ja p√ºstitas rohkem kujusid kui √ºkski teine vaarao, olles tuntuim ja v√§gevaim Uue riigi valitseja.",
        wrongFeedback: {
          0: "Tutanhamoni ehitusp√§rand on tema l√ºhikese valitsuse t√µttu v√§ike.",
          2: "Ehnaton ehitas peamiselt oma uut pealinna, Abu Simbel asub aga kaugel l√µunas Nuubia piiril.",
          3: "Hat≈°epsut oli Ramsesest varem ja ehitas oma kuulsa templi Deir al-Bahrisse."
        }
      },
      {
        id: 'new_abu_2', type: 'truefalse', location: 'abu_simbel', difficulty: 1,
        question: "Abu Simbeli templid on t√§nap√§eval t√§pselt samas kohas, kuhu Ramses II need algselt lasi ehitada.",
        correct: false,
        image: images.abu_simbel,
        explanation: "1960ndatel aastatel t√µsteti Abu Simbeli templid kivi-kivi haaval k√µrgemale k√ºnkale. See oli hiigelprojekt, et p√§√§sta need uputamise eest p√§rast Assuani paisu valmimist.",
        treasure: "statue"
      },
      {
        id: 'new_abu_3', type: 'fillin', location: 'abu_simbel', difficulty: 2,
        question: "Millise suurriigi k√§tte langes Egiptus l√µplikult 525. aastal eKr?",
        answer: ["p√§rsia", "p√§rslaste"],
        image: images.abu_simbel,
        explanation: "P√§rsia sissetung l√µpetas iseseisva Egiptuse valitsejate aja. Hiljem tulid Aleksander Suure makedoonlased ja l√µpuks Rooma keisririik."
      },
      {
        id: 'new_abu_4', type: 'choice', location: 'abu_simbel', difficulty: 1,
        question: "Milline ajaloolane nimetas Egiptust 'Niiluse kingituseks'?",
        options: ["Herodotos", "Sokrates", "Julius Caesar", "Napoleon"],
        correct: 0,
        image: images.nile,
        explanation: "Vana-Kreeka ajaloolane Herodotos m√§rkas 5. sajandil eKr, et ilma Niiluse viljaka mudata ja regulaarse √ºleujutuseta oleks Egiptus vaid elutu k√µrb.",
        wrongFeedback: {
          1: "Sokrates oli filosoof ega reisinud teadaolevalt Egiptusesse.",
          2: "Julius Caesar vallutas Egiptuse hiljem, kuid ta polnud ajaloolane.",
          3: "Napoleon v√µttis Egiptuse retkele kaasa teadlasi, kuid Herodotos kirjutas sellest 2300 aastat varem."
        }
      },
      {
        id: 'new_abu_5', type: 'written', location: 'abu_simbel', difficulty: 3,
        question: "Kes oli see prantslane, kes de≈°ifreeris Rosette'i kivi abil hierogl√º√ºfid 1822. aastal?",
        answer: ["jean-fran√ßois champollion", "champollion"],
        image: images.rosetta,
        explanation: "Champollion m√µistis, et hierogl√º√ºfid ei t√§hista ainult m√µisteid, vaid ka h√§√§likuid. See oli kaasaegne eg√ºptoloogia s√ºnnihetk.",
        treasure: "rosetta"
      },
      {
        id: 'new_abu_6', type: 'choice', location: 'abu_simbel', difficulty: 2,
        question: "Mitu korda aastas paistab t√µusev p√§ike Abu Simbeli templi s√ºgavusse, valgustades jumalate kujusid?",
        options: ["Iga p√§ev", "√úks kord aastas", "Kaks korda aastas", "Mitte kunagi"],
        correct: 2,
        image: images.abu_simbel,
        explanation: "22. veebruaril ja 22. oktoobril langeb p√§ikesekiir t√§pselt l√§bi templi sissep√§√§su k√µige tagumisse kambrisse. See t√§histas Ramses II s√ºnni- ja kroonimisp√§eva.",
        wrongFeedback: {
          0: "P√§ike paistab sisse ainult v√§ga t√§psel ajal t√§nu templi osavale planeerimisele.",
          1: "Tegemist on kahekordse n√§htusega, mis kordub kevadisel ja s√ºgisesel ajal.",
          3: "P√§ike paistab sisse ja see on √ºks templi suurimaid insenertehnilisi saavutusi."
        }
      },
      {
        id: 'new_abu_7', type: 'truefalse', location: 'abu_simbel', difficulty: 2,
        question: "Viimane Egiptuse vaarao oli naine ‚Äì Kleopatra VII.",
        correct: true,
        image: images.nefertiti,
        explanation: "P√§rast Kleopatra surma 30. aastal eKr muutus Egiptus Rooma provintsiks ja vaaraode 3000-aastane aeg sai l√µplikult otsa.",
        treasure: "sarcophagus"
      },
      {
        id: 'new_abu_8', type: 'written', location: 'abu_simbel', difficulty: 2,
        question: "Mis oli see kuulus kivi, mille leidsid Napoleoni s√µdurid ja mis aitas hierogl√º√ºfe lugeda?",
        answer: ["rosette kivi", "rosetta kivi"],
        image: images.rosetta,
        explanation: "Rosette'i kivil oli sama tekst kirjas kolmes keeles: hierogl√º√ºfides, demootilises kirjas ja vanakreeka keeles. See andis Champollionile v√µtme koodi murdmiseks."
      },
      {
        id: 'new_abu_11', type: 'choice', location: 'abu_simbel', difficulty: 2,
        question: "Millal langes Egiptus l√µplikult Rooma v√µimu alla, t√§histades vaaraode aja l√µppu?",
        options: ["1000 eKr", "525 eKr", "332 eKr", "30 eKr"],
        correct: 3,
        image: images.cleopatra,
        explanation: "Aastal 30 eKr, p√§rast Kleopatra VII surma, muutus Egiptus Rooma provintsiks. See l√µpetas √ºle 3000 aasta kestnud vaaraode valitsemisaja."
      },
      {
        id: 'new_abu_12', type: 'written', location: 'abu_simbel', difficulty: 2,
        question: "Kes oli see viimane Egiptuse naisvaarao, kes p√º√ºdis riiki p√§√§sta suhete kaudu Caesari ja Antoniusega?",
        answer: ["kleopatra", "kleopatra vii"],
        image: images.cleopatra,
        explanation: "Kleopatra VII oli viimane iseseisev Egiptuse valitseja. Ta kuulus kreeka p√§ritolu Ptolemaioste d√ºnastiasse, kes valitsesid Egiptust alates Aleksander Suurest."
      },
      {
        id: 'new_abu_13', type: 'truefalse', location: 'abu_simbel', difficulty: 1,
        question: "Egiptlaste loodud 365-p√§evane p√§ikesekalender on aluseks meie t√§nap√§evasele kalendrile.",
        correct: true,
        image: images.ra,
        explanation: "Egiptlastel oli 12 kuud (iga√ºhes 30 p√§eva) pluss 5 lisap√§eva aasta l√µpus. See t√§pne s√ºsteem v√µeti hiljem √ºle roomlaste poolt (Juliuse kalender) ja on meie ajaarvamise vundamendiks."
      },
      {
        id: 'new_abu_9', type: 'choice', location: 'abu_simbel', difficulty: 2,
        question: "Milline suur lahing Ramses II ja hetiitide vahel on j√§√§dvustatud Abu Simbeli templi seintel?",
        options: ["Kadeshi lahing", "Giza lahing", "Teeba lahing", "Waterloo lahing"],
        correct: 0,
        image: images.war_chariot,
        explanation: "Kadeshi lahing oli √ºks ajaloo suurimaid s√µjavankrite lahinguid. Ramses kuulutas end v√µitjaks, kuigi tegelikult l√µppes see pigem viigiga.",
        wrongFeedback: {
          1: "Giza on tuntud p√ºramiidide, mitte suurte lahingute poolest.",
          2: "Teeba oli rahumeelne usukeskus, lahing toimus kaugel kirdes.",
          3: "Waterloo lahing toimus 1815. aastal ja seal kaotas Napoleon."
        }
      },
      {
        id: 'sort_abu_1', type: 'sorting', location: 'abu_simbel', difficulty: 3,
        question: "Pane need ajastud kronoloogilisse j√§rjekorda (vanimast uusimani)!",
        options: ["P√ºramiidide aeg (Vana riik)", "H√ºksoste tung ja orjus (Keskmine riik)", "Vallutusretked ja √µitseng (Uus riik)", "P√§rsia ja Kreeka-Rooma aeg"],
        correct: [0, 1, 2, 3],
        image: images.egypt_map,
        explanation: "Egiptuse ajalugu jaotatakse tavaliselt kolmeks suureks riigiks, mille vahele ja peale j√§id segased vaheperioodid ja v√µ√µrvallutused.",
        treasure: "rosetta"
      },
    ];

    // ========== AARDED ==========
    const treasures = {
      papyrus: { name: "Pap√º√ºrusrull", icon: "üìú", description: "Annab tasuta vihje.", effect: "hint" },
      lotus: { name: "Lootos√µis", icon: "ü™∑", description: "Kaunis lill Niiluse kaldalt.", effect: null },
      crown: { name: "Kahekordne kroon", icon: "üëë", description: "Alam- ja √úlem-Egiptuse √ºhtsuse s√ºmbol.", effect: null },
      crook: { name: "Vaarao kepp", icon: "ü™ù", description: "Valitseja karjasekepp.", effect: null },
      statue: { name: "Abu Simbeli kuju", icon: "üóø", description: "V√µimas kaljukuju.", effect: null },
      mask: { name: "Tutanhamoni mask", icon: "üò∂", description: "Lapsvaarao kuldne mask.", effect: null },
      sun_disk: { name: "Atoni ketas", icon: "‚òÄÔ∏è", description: "P√§ikeseketta s√ºmbol.", effect: null },
      bust: { name: "Nofretete b√ºst", icon: "üë∏", description: "K√µige ilusam skulptuur.", effect: null },
      feather: { name: "Maati sulg", icon: "ü™∂", description: "T√µe ja √µigluse s√ºmbol.", effect: "shield" },
      scarab: { name: "Skarabeus", icon: "ü™≤", description: "Kaitseb halva √µnne eest.", effect: "shield" },
      djed: { name: "Djed-sammas", icon: "üèõÔ∏è", description: "Stabiilsuse s√ºmbol.", effect: null },
      anubis: { name: "Anubise kuju", icon: "üê∫", description: "Surnute kaitsja.", effect: null },
      eye: { name: "Horose silm", icon: "üëÅÔ∏è", description: "Eemaldab valed vastused.", effect: "5050" },
      mummy: { name: "Muumia", icon: "üßü", description: "Igaveseks s√§ilitatud keha.", effect: null },
      sarcophagus: { name: "Sarkofaag", icon: "‚ö∞Ô∏è", description: "Kivist kirst.", effect: null },
      heart: { name: "S√ºdame amulett", icon: "‚ù§Ô∏è", description: "Annab +1 elu.", effect: "life" },
      pyramid: { name: "P√ºramiid", icon: "üî∫", description: "Igaviku maja.", effect: null },
      hieroglyph: { name: "Hierogl√º√ºfid", icon: "ìÄÄ", description: "Jumalikud m√§rgid.", effect: null },
      temple: { name: "Templi mudel", icon: "üèõÔ∏è", description: "Jumala elupaik.", effect: null },
      step_pyramid: { name: "Astmikp√ºramiid", icon: "üìê", description: "Esimene suur kiviehitis.", effect: null },
      rosetta: { name: "Rosette'i kivi", icon: "ü™®", description: "Auto-lahendab √ºhe k√ºsimuse.", effect: "solve" },
      column: { name: "Karnaki sammas", icon: "üèõÔ∏è", description: "Hiiglaslik tempisamba mudel.", effect: null },
      cat: { name: "Kassimuumia", icon: "üê±", description: "Basteti p√ºha loom.", effect: null },
      scarab_amulet: { name: "Skarabeuse amulett", icon: "üíé", description: "Toob √µnne ja kaitset.", effect: "shield" }
    };

    // ========== ASUKOHAD ==========
    const locations = [
      { id: 'delta', name: 'Niiluse delta', icon: 'üåä', x: 50, y: 10 },
      { id: 'giza', name: 'Giza', icon: 'üî∫', x: 45, y: 20 },
      { id: 'memphis', name: 'Memphis', icon: 'üèõÔ∏è', x: 48, y: 28 },
      { id: 'amarna', name: 'Amarna', icon: '‚òÄÔ∏è', x: 55, y: 42 },
      { id: 'abydos', name: 'Abydos', icon: '‚ö±Ô∏è', x: 45, y: 52 },
      { id: 'teeba', name: 'Teeba', icon: 'üè∫', x: 52, y: 62 },
      { id: 'karnak', name: 'Karnak', icon: 'üåô', x: 55, y: 70 },
      { id: 'kuningate_org', name: 'Kuningate org', icon: 'üëë', x: 48, y: 78 },
      { id: 'abu_simbel', name: 'Abu Simbel', icon: 'üóø', x: 52, y: 90 }
    ];

    // ========== KARAKTERID ==========
    const characters = [
      { id: 'scribe', name: 'Kirjutaja', icon: 'üìú', description: 'Tarkuse otsija', perk: 'Saad iga asukoha alguses tasuta vihje.', effect: 'free_hint' },
      { id: 'warrior', name: 'S√µdalane', icon: '‚öîÔ∏è', description: 'Julge v√µitleja', perk: 'Alustad 4 eluga.', effect: 'extra_life' },
      { id: 'architect', name: 'Arhitekt', icon: 'üìê', description: 'Ehitusmeister', perk: 'Saad 25% rohkem punkte.', effect: 'bonus_points' },
      { id: 'priest', name: 'Preester', icon: 'üôè', description: 'Jumalate teener', perk: 'Esimene eksimus asukohas ei v√µta elu.', effect: 'second_chance' }
    ];

    // ========== PEAKOMPONENT ==========
    const NiiluseTeekond = () => {
      const { playSound, soundEnabled, setSoundEnabled, initAudio } = useSounds();
      const [playerName, setPlayerName] = useState('');
      const [selectedCharacter, setSelectedCharacter] = useState(null);
      const [currentLocation, setCurrentLocation] = useState(0);
      const [lives, setLives] = useState(3);
      const [hints, setHints] = useState(3);
      const [streak, setStreak] = useState(0);
      const [bestStreak, setBestStreak] = useState(0);
      const [score, setScore] = useState(0);
      const [collectedTreasures, setCollectedTreasures] = useState([]);
      const [factCards, setFactCards] = useState([]);
      const [answeredQuestions, setAnsweredQuestions] = useState(new Set());
      const [unlockedAchievements, setUnlockedAchievements] = useState([]);
      const [stats, setStats] = useState({ totalCorrect: 0, totalAnswered: 0, perfectLocations: 0, recoveries: 0, trueFalseCorrect: 0, geoCorrect: 0, gameCompleted: false });
      const [activeEvent, setActiveEvent] = useState(null);
      const [eventCounter, setEventCounter] = useState(0);
      const [shield, setShield] = useState(false);
      const [freeHint, setFreeHint] = useState(false);
      const [showEventModal, setShowEventModal] = useState(false);
      const [pendingEvent, setPendingEvent] = useState(null);
      const [currentQuestion, setCurrentQuestion] = useState(null);
      const [questionQueue, setQuestionQueue] = useState([]);
      const [userAnswer, setUserAnswer] = useState('');
      const [selectedOption, setSelectedOption] = useState(null);
      const [selectedOptions, setSelectedOptions] = useState(new Set()); // Multi-select jaoks
      const [matchingPairs, setMatchingPairs] = useState({}); // Matching jaoks
      const [hotspotClick, setHotspotClick] = useState(null); // Hotspot jaoks
      const [matchingSelectedLeft, setMatchingSelectedLeft] = useState(null); // Matching ajutine valik
      const [userSortOrder, setUserSortOrder] = useState([]); // Sorting k√ºsimuse jaoks
      const [showResult, setShowResult] = useState(false);
      const [isCorrect, setIsCorrect] = useState(false);
      const [showHint, setShowHint] = useState(false);
      const [locationMistakes, setLocationMistakes] = useState(0);
      const [screen, setScreen] = useState('start');
      const [showTreasureRoom, setShowTreasureRoom] = useState(false);
      const [showFactCards, setShowFactCards] = useState(false);
      const [showAchievements, setShowAchievements] = useState(false);
      const [notification, setNotification] = useState(null);
      const [fallingBack, setFallingBack] = useState(false);
      const [newAchievement, setNewAchievement] = useState(null);
      const [hiddenOptions, setHiddenOptions] = useState(new Set()); // 50/50 jaoks
      const [highScores, setHighScores] = useState([]);
      const [showHighScores, setShowHighScores] = useState(false);

      useEffect(() => {
        const savedScores = JSON.parse(localStorage.getItem('niilus_highscores') || '[]');
        setHighScores(savedScores);
      }, []);

      const saveHighScore = (finalScore) => {
        const char = characters.find(c => c.id === selectedCharacter);
        const newScore = {
          playerName,
          score: finalScore,
          char: char ? char.icon : 'üë§',
          date: new Date().toLocaleDateString('et-EE')
        };

        setHighScores(prev => {
          const next = [...prev, newScore]
            .sort((a, b) => b.score - a.score)
            .slice(0, 10);
          localStorage.setItem('niilus_highscores', JSON.stringify(next));
          return next;
        });
      };

      const startGame = async () => {
        if (!playerName.trim()) { showNotification('Palun sisesta oma nimi!', 'warning'); return; }
        if (!selectedCharacter) { showNotification('Palun vali karakter!', 'warning'); return; }

        await initAudio();
        playSound('click');

        let initialLives = 3;
        if (selectedCharacter === 'warrior') initialLives = 4;

        setCurrentLocation(0);
        setLives(initialLives);
        setHints(3);
        setStreak(0);
        setBestStreak(0);
        setScore(0);
        setAnsweredQuestions(new Set());
        setCollectedTreasures([]);
        setFactCards([]);
        setUnlockedAchievements([]);
        setStats({ totalCorrect: 0, totalAnswered: 0, perfectLocations: 0, recoveries: 0, trueFalseCorrect: 0, geoCorrect: 0, gameCompleted: false });
        setActiveEvent(null);
        setEventCounter(0);
        setShield(false);
        setFreeHint(false);
        setScreen('map');
      };

      const showNotification = (message, type = 'info') => {
        setNotification({ message, type });
        setTimeout(() => setNotification(null), 3000);
      };

      const checkAchievements = (currentStats) => {
        achievements.forEach(ach => {
          if (!unlockedAchievements.includes(ach.id)) {
            const statsForCondition = {
              ...currentStats,
              treasureCount: collectedTreasures.length,
              factCount: factCards.length
            };
            if (ach.condition(statsForCondition)) {
              setUnlockedAchievements(prev => [...prev, ach.id]);
              setNewAchievement(ach);
              playSound('achievement');
              setTimeout(() => setNewAchievement(null), 5000);
            }
          }
        });
      };

      const getQuestionsForLocation = (locationId) => {
        return allQuestions.filter(q => q.location === locationId && !answeredQuestions.has(q.id));
      };

      const shuffleQuestions = (array, count) => {
        const shuffled = [...array].sort(() => 0.5 - Math.random());
        return shuffled.slice(0, count);
      };

      const checkWrittenAnswer = (userAnswer, correctAnswers) => {
        const normalizedUser = userAnswer.trim().toLowerCase().replace(/[.,!?;:]/g, '');
        return correctAnswers.some(ans => {
          const normalizedAns = ans.toLowerCase().replace(/[.,!?;:]/g, '');
          return normalizedUser === normalizedAns || (normalizedUser.includes(normalizedAns) && normalizedAns.length > 3);
        });
      };

      const triggerRandomEvent = () => {
        if (Math.random() < 0.3) {
          const event = randomEvents[Math.floor(Math.random() * randomEvents.length)];
          setPendingEvent(event);
          setShowEventModal(true);
          playSound('event');
        }
      };

      const applyEvent = (event) => {
        setActiveEvent(event);
        setEventCounter(event.duration || 0);

        if (event.effect === 'extraLife') {
          setLives(l => Math.min(l + 1, 5));
          showNotification('Sinu elud suurenesid!', 'success');
        } else if (event.effect === 'losePoints') {
          setScore(s => Math.max(0, s - 50));
          showNotification('Kaotasid 50 punkti!', 'warning');
        } else if (event.effect === 'freeHint') {
          setFreeHint(true);
          showNotification('Sinu j√§rgmine vihje on tasuta!', 'success');
        } else if (event.effect === 'shield') {
          setShield(true);
          showNotification('Skarabeuse kaitse aktiivne!', 'success');
        }

        setShowEventModal(false);
        setPendingEvent(null);
      };

      // ========== EKRAANID ==========
      if (screen === 'start') {
        return (
          <div className="min-h-screen bg-gradient-to-b from-amber-900 via-amber-800 to-amber-950 flex items-center justify-center p-4 relative overflow-hidden">
            <div className="bg-sand absolute inset-0 pointer-events-none"></div>
            <div className="max-w-4xl w-full text-center relative z-10 flex flex-col items-center">
              <div className="mb-8 animate-float">
                <h1 className="text-5xl md:text-7xl font-extrabold text-transparent bg-clip-text bg-gradient-to-b from-amber-200 to-amber-500 mb-2 tracking-tighter">
                  ìÇÄ NIILUSE TEEKOND ìÇÄ
                </h1>
                <p className="text-xl text-amber-300/80 font-light tracking-widest uppercase">Vali oma saatus</p>
              </div>

              <div className="glass rounded-3xl p-6 mb-8 shadow-2xl border-amber-500/30 w-full max-w-lg">
                <input
                  type="text"
                  value={playerName}
                  onChange={(e) => setPlayerName(e.target.value)}
                  placeholder="Sinu nimi..."
                  className="w-full bg-amber-950/50 text-amber-100 placeholder-amber-500/50 text-center text-2xl font-bold py-4 rounded-xl border-2 border-amber-500/30 focus:border-amber-400 focus:outline-none focus:ring-4 focus:ring-amber-500/20 mb-6"
                />

                <div className="grid grid-cols-2 gap-4 mb-6">
                  {characters.map(char => (
                    <button
                      key={char.id}
                      onClick={() => { playSound('click'); setSelectedCharacter(char.id); }}
                      className={`p-4 rounded-xl border-2 transition-all flex flex-col items-center gap-2 ${selectedCharacter === char.id ? 'bg-amber-500/20 border-amber-400 scale-105 shadow-lg' : 'bg-black/20 border-transparent hover:bg-black/30'}`}
                    >
                      <div className="text-4xl mb-1">{char.icon}</div>
                      <div className="font-bold text-amber-100">{char.name}</div>
                      <div className="text-xs text-amber-300/70">{char.perk}</div>
                    </button>
                  ))}
                </div>

                <button
                  onClick={startGame}
                  disabled={!playerName.trim() || !selectedCharacter}
                  className={`w-full py-4 rounded-xl font-bold text-xl uppercase tracking-widest transition-all transform shadow-xl ${(!playerName.trim() || !selectedCharacter)
                    ? 'bg-gray-700 text-gray-400 cursor-not-allowed'
                    : 'bg-gradient-to-r from-amber-500 to-yellow-600 text-white hover:scale-105 hover:from-amber-400 hover:to-yellow-500 btn-egypt'}`}
                >
                  Alusta r√§nnakut
                </button>

                <button
                  onClick={() => { playSound('click'); setShowHighScores(true); }}
                  className="w-full mt-4 py-3 rounded-xl font-bold text-amber-500/80 uppercase tracking-widest transition-all border-2 border-amber-500/20 hover:bg-amber-500/10"
                >
                  üèÜ Edetabel
                </button>
              </div>
            </div>
          </div>
        );
      }

      const loadNextQuestion = (queue = questionQueue) => {
        if (queue.length === 0) {
          if (locationMistakes === 0) {
            const newStats = { ...stats, perfectLocations: stats.perfectLocations + 1 };
            setStats(newStats);
            checkAchievements(newStats);
          }
          if (currentLocation < locations.length - 1) {
            setCurrentLocation(prev => prev + 1);
            setScreen('map');
            showNotification(`üéâ Tubli, ${playerName}!`, 'success');
            playSound('levelup');
          }
          else {
            setStats(s => ({ ...s, gameCompleted: true }));
            saveHighScore(score);
            setScreen('victory');
            playSound('victory');
          }
          return;
        }
        const [next, ...rest] = queue;
        setCurrentQuestion(next);
        setQuestionQueue(rest);
        setUserAnswer('');
        setSelectedOption(null);
        setSelectedOptions(new Set());
        setMatchingPairs({});
        setMatchingSelectedLeft(null);
        setHotspotClick(null);
        setUserSortOrder([]); // Reset sorting
        setHiddenOptions(new Set()); // Reset 50/50
        setShowResult(false);
        setShowHint(false);
        setScreen('question');
      };

      const useTreasure = (treasureId) => {
        const item = treasures[treasureId];
        if (!item || !item.effect) return;

        playSound('click');
        let used = false;

        switch (item.effect) {
          case 'hint':
            if (!showHint) {
              setFreeHint(true);
              useHint();
              used = true;
            }
            break;
          case 'shield':
            if (!shield) {
              setShield(true);
              showNotification('Skarabeuse kaitse aktiivne!', 'success');
              used = true;
            }
            break;
          case 'life':
            if (lives < 5) {
              setLives(prev => prev + 1);
              showNotification('Said √ºhe elu juurde!', 'success');
              used = true;
            }
            break;
          case '5050':
            if (currentQuestion && (currentQuestion.type === 'choice' || currentQuestion.type === 'identify') && hiddenOptions.size === 0) {
              const wrongIndices = currentQuestion.options
                .map((_, i) => i)
                .filter(i => i !== currentQuestion.correct);
              const toHide = wrongIndices.sort(() => 0.5 - Math.random()).slice(0, 2);
              setHiddenOptions(new Set(toHide));
              showNotification('Horose silm paljastas valed!', 'info');
              used = true;
            }
            break;
          case 'solve':
            if (currentQuestion && !showResult) {
              if (currentQuestion.type === 'choice' || currentQuestion.type === 'identify' || currentQuestion.type === 'truefalse') {
                setSelectedOption(currentQuestion.correct);
              } else if (currentQuestion.type === 'written' || currentQuestion.type === 'fillin') {
                setUserAnswer(currentQuestion.answer[0]);
              } else if (currentQuestion.type === 'sorting') {
                setUserSortOrder([...currentQuestion.correct]);
              }
              showNotification('Rosette\'i kivi t√µlkis vastuse!', 'info');
              used = true;
            }
            break;
        }

        if (used) {
          setCollectedTreasures(prev => {
            const index = prev.indexOf(treasureId);
            if (index > -1) {
              const next = [...prev];
              next.splice(index, 1);
              return next;
            }
            return prev;
          });
        }
      };

      const enterLocation = (locationIndex) => {
        playSound('click');
        const location = locations[locationIndex];
        const questions = getQuestionsForLocation(location.id);

        if (questions.length === 0) {
          if (locationIndex < locations.length - 1) { setCurrentLocation(locationIndex + 1); showNotification('‚ú® K√µik vastatud!', 'success'); playSound('levelup'); }
          else { setStats(s => ({ ...s, gameCompleted: true })); setScreen('victory'); playSound('victory'); }
          return;
        }

        // Scribe perk: free hint at start of location
        if (selectedCharacter === 'scribe') {
          setFreeHint(true);
          showNotification('Kirjutaja sai Thoti vihje!', 'info');
        }

        setLocationMistakes(0);
        const balanced = shuffleQuestions(questions, 4);
        setQuestionQueue(balanced);
        loadNextQuestion(balanced);
      };

      const useHint = () => {
        if (showResult || showHint || (!hints && !freeHint)) return; // Kui pole vihjeid ja pole tasuta vihjet

        // ERIKONTROLL KIRJUTAJA JAOKS (Scribe Perk)
        // Kui on Kirjutaja JA tal on see perk t√§na veel kasutamata (v√µi lihtsalt √ºldine loogika)
        // Antud lahendus kasutab 'freeHint' olekut, mis on universaalne
        if (freeHint) {
          setFreeHint(false); // Kasuta √§ra
        } else {
          if (hints > 0) setHints(h => h - 1);
        }

        playSound('click');
        setShowHint(true);
      };

      const submitAnswer = () => {
        if (showResult || lives <= 0) return;

        let correct = false;
        if (currentQuestion.type === 'choice' || currentQuestion.type === 'identify' || currentQuestion.type === 'truefalse') {
          correct = selectedOption === currentQuestion.correct;
        } else if (currentQuestion.type === 'written' || currentQuestion.type === 'fillin') {
          correct = checkWrittenAnswer(userAnswer, currentQuestion.answer);
        } else if (currentQuestion.type === 'sorting') {
          correct = JSON.stringify(userSortOrder) === JSON.stringify(currentQuestion.correct);
        } else if (currentQuestion.type === 'multiSelect') {
          const sortedSelected = [...selectedOptions].sort();
          const sortedCorrect = [...currentQuestion.correct].sort();
          correct = JSON.stringify(sortedSelected) === JSON.stringify(sortedCorrect);
        } else if (currentQuestion.type === 'matching') {
          correct = Object.keys(matchingPairs).length === currentQuestion.options.left.length &&
            currentQuestion.options.left.every((_, i) => matchingPairs[i] === currentQuestion.correct[i]);
        } else if (currentQuestion.type === 'hotspot') {
          if (!hotspotClick) return;
          const { x, y } = hotspotClick;
          const { targetX, targetY, radius } = currentQuestion.correct;
          const dist = Math.sqrt(Math.pow(x - targetX, 2) + Math.pow(y - targetY, 2));
          correct = dist <= (radius || 10);
        }

        setIsCorrect(correct);
        setShowResult(true);

        if (correct) {
          playSound('correct');

          let points = 100 + (streak * 10);
          if (selectedCharacter === 'architect') points = Math.round(points * 1.25);
          if (activeEvent?.effect === 'doublePoints') points *= 2;

          setScore(s => s + points);
          setStreak(s => {
            const newStreak = s + 1;
            if (newStreak > bestStreak) setBestStreak(newStreak);
            if (newStreak % 5 === 0) {
              setHints(prev => Math.min(prev + 1, 5));
              playSound('streak');
            }
            return newStreak;
          });

          // Aarde korjamine
          if (currentQuestion.treasure && treasures[currentQuestion.treasure] && !collectedTreasures.includes(currentQuestion.treasure)) {
            setCollectedTreasures(prev => [...prev, currentQuestion.treasure]);
            setTimeout(() => { playSound('treasure'); showNotification(`üíé ${treasures[currentQuestion.treasure].name}!`, 'treasure'); }, 500);
          }

          setStats(s => ({ ...s, totalCorrect: s.totalCorrect + 1 }));
          if (currentQuestion.type === 'truefalse') setStats(s => ({ ...s, trueFalseCorrect: s.trueFalseCorrect + 1 }));
          if (currentQuestion.id.startsWith('geo_')) setStats(s => ({ ...s, geoCorrect: s.geoCorrect + 1 }));

        } else {
          playSound('wrong');
          setStreak(0);

          let loseLife = true;
          if (shield) {
            loseLife = false;
            setShield(false);
            showNotification('Skarabeus p√§√§stis sind!', 'success');
          } else if (selectedCharacter === 'priest' && locationMistakes === 0) {
            loseLife = false;
            showNotification('Jumalad andsid andeks! (Preestri eelis)', 'success');
          }

          if (loseLife) {
            setLives(l => l - 1);
            setScreen('shake'); setTimeout(() => setScreen('game'), 500);
            if (lives <= 1) setFallingBack(true);
          }

          setLocationMistakes(m => m + 1);
        }

        setAnsweredQuestions(prev => new Set(prev).add(currentQuestion.id));
        setStats(s => ({ ...s, totalAnswered: s.totalAnswered + 1 }));
      };

      const nextQuestion = () => {
        // ERIKONTROLL KIRJUTAJA JAOKS (Scribe Perk - Daily Free Hint)
        // Iga kord, kui liigub uude asukohta ehk enterLocation, v√µiks ta saada tasuta vihje
        // Aga siin 'nextQuestion' on √ºhe asukoha sees.
        // Teeme nii: Kirjutaja saab iga KORRA, kui hints on 0, √ºhe tasuta vihje? Ei, liiga v√µimas.
        // J√§√§me selle juurde: Kirjutaja alustab m√§ngu 'freeHint = true' ja saab uue iga asukoha alguses.

        if (lives <= 0) {
          saveHighScore(score);
          setScreen('gameover');
          playSound('fall');
          return;
        }

        setShowResult(false);
        setShowHint(false);
        setUserAnswer('');
        setSelectedOption(null);

        if (activeEvent && eventCounter > 0) {
          setEventCounter(prev => {
            const next = prev - 1;
            if (next === 0) setActiveEvent(null);
            return next;
          });
        }

        if (questionQueue.length > 0) {
          loadNextQuestion();
        } else {
          // Asukoht l√§bitud
          if (locationMistakes === 0) {
            setStats(s => ({ ...s, perfectLocations: s.perfectLocations + 1 }));
            // Preestri boonus: Kui l√§bid vigadeta, saad elu tagasi?
            if (selectedCharacter === 'priest' && lives < 5) setLives(l => l + 1);
          }

          // Kasuta juhuslikku s√ºndmust
          triggerRandomEvent();

          // Tagasta kaardile
          setScreen('map');
        }
      };

      const handleFallBack = () => {
        setFallingBack(false); setLives(3);
        const newStats = { ...stats, recoveries: stats.recoveries + 1 }; setStats(newStats); checkAchievements(newStats);
        if (currentLocation > 0) { setCurrentLocation(prev => prev - 1); showNotification(`üòµ Tagasi: ${locations[currentLocation - 1].name}`, 'warning'); }
        else { showNotification(`üòµ Proovi uuesti!`, 'warning'); }
        setScreen('map');
      };

      if (screen === 'map') {
        return (
          <div className="min-h-screen bg-gradient-to-b from-blue-900 via-amber-800 to-amber-950 p-4 relative overflow-hidden">
            <div className="bg-sand absolute inset-0 pointer-events-none opacity-10"></div>
            <div className="max-w-4xl mx-auto mb-6 relative z-10">
              <div className="glass rounded-3xl p-4 flex flex-wrap justify-between items-center gap-4 shadow-2xl border-amber-500/20">
                <div className="flex gap-4 items-center">
                  <div className="bg-amber-500/20 px-4 py-2 rounded-2xl border border-amber-500/30">
                    <span className="text-amber-200 font-black text-lg tracking-tight uppercase">{playerName}</span>
                    <span className="text-amber-300 ml-2 text-sm">{characters.find(c => c.id === selectedCharacter)?.icon}</span>
                  </div>
                  <div className="flex gap-1 bg-black/30 px-3 py-2 rounded-2xl">
                    {[...Array(5)].map((_, i) => (
                      <span key={i} className={`text-xl transition-all duration-500 ${i < lives ? 'drop-shadow-[0_0_8px_rgba(251,191,36,0.8)]' : 'opacity-20 grayscale'}`}>
                        {i === 0 ? 'ìÇì' : i === 1 ? 'ìÖÉ' : 'ìãπ'}
                      </span>
                    ))}
                  </div>
                  <div className="bg-blue-900/40 px-4 py-2 rounded-2xl border border-blue-400/30 flex items-center gap-2">
                    <span className="text-2xl">ü™∂</span>
                    <span className="text-blue-200 font-bold">{hints}</span>
                  </div>
                </div>

                <div className="flex gap-4 items-center">
                  {streak >= 3 && <div className="animate-bounce bg-orange-600 text-white px-3 py-1 rounded-full text-sm font-black shadow-lg shadow-orange-600/50">üî• {streak}</div>}
                  <div className="text-3xl font-black text-amber-400 drop-shadow-md tracking-tighter">{score}<span className="text-xs uppercase ml-1 opacity-70 text-amber-200">pt</span></div>
                  <button onClick={() => { playSound('click'); setSoundEnabled(!soundEnabled); }} className="p-2 hover:bg-white/10 rounded-full transition-colors">
                    <span className="text-2xl">{soundEnabled ? 'üîä' : 'üîá'}</span>
                  </button>
                </div>

                <div className="flex gap-2 w-full md:w-auto">
                  <button onClick={() => { playSound('click'); setShowTreasureRoom(true); }} className="flex-1 md:flex-none glass-light/10 hover:bg-white/10 text-amber-200 px-4 py-2 rounded-2xl text-sm font-bold border border-amber-500/20 transition-all flex items-center justify-center gap-2">
                    <span>üíé</span> {collectedTreasures.length}
                  </button>
                  <button onClick={() => { playSound('click'); setShowFactCards(true); }} className="flex-1 md:flex-none glass-light/10 hover:bg-white/10 text-amber-200 px-4 py-2 rounded-2xl text-sm font-bold border border-amber-500/20 transition-all flex items-center justify-center gap-2">
                    <span>üìö</span> {factCards.length}
                  </button>
                  <button onClick={() => { playSound('click'); setShowAchievements(true); }} className="flex-1 md:flex-none glass-light/10 hover:bg-white/10 text-amber-200 px-4 py-2 rounded-2xl text-sm font-bold border border-amber-500/20 transition-all flex items-center justify-center gap-2">
                    <span>üèÜ</span> {unlockedAchievements.length}
                  </button>
                </div>
              </div>
            </div>

            <div className="max-w-4xl mx-auto relative z-10">
              <div className="relative bg-gradient-to-b from-amber-200 via-amber-300 to-amber-500 rounded-[40px] p-8 shadow-[0_30px_60px_-12px_rgba(0,0,0,0.5)] border-4 border-amber-100/50 overflow-hidden" style={{ minHeight: '600px' }}>
                {/* Geographic Labels */}
                <div className="absolute top-4 left-1/2 -translate-x-1/2 text-blue-900/30 font-black text-xl uppercase tracking-widest pointer-events-none">Vahemeri</div>
                <div className="absolute top-24 left-12 text-amber-900/20 font-black text-sm uppercase tracking-widest pointer-events-none -rotate-12">L√§√§nek√µrb</div>
                <div className="absolute top-60 right-8 text-blue-900/20 font-black text-sm uppercase tracking-widest pointer-events-none rotate-90">Punane meri</div>
                <div className="absolute top-[20%] right-[30%] text-amber-950/30 font-black text-xs uppercase tracking-tighter pointer-events-none">Alam-Egiptus</div>
                <div className="absolute top-[65%] right-[35%] text-amber-950/30 font-black text-xs uppercase tracking-tighter pointer-events-none">√úlem-Egiptus</div>
                <div className="absolute bottom-8 right-12 text-amber-900/20 font-black text-sm uppercase tracking-widest pointer-events-none">Nuubia</div>

                {/* The Nile */}
                <div className="absolute left-1/2 top-0 bottom-0 w-12 bg-gradient-to-r from-blue-600 via-blue-400 to-blue-600 transform -translate-x-1/2 rounded-full opacity-40 blur-sm shadow-inner pointer-events-none" />
                <div className="absolute left-1/2 top-0 bottom-0 w-8 bg-gradient-to-r from-blue-500 via-blue-300 to-blue-500 transform -translate-x-1/2 rounded-full opacity-60 animate-pulse pointer-events-none" />

                {locations.map((loc, idx) => (
                  <div key={loc.id} className="absolute transform -translate-x-1/2 -translate-y-1/2 transition-all duration-700" style={{ left: `${loc.x}%`, top: `${loc.y}%`, zIndex: idx === currentLocation ? 50 : 10 }}>
                    <div className="relative">
                      {idx === currentLocation && (
                        <div className="absolute -inset-4 bg-amber-400 rounded-full animate-ping opacity-20 pointer-events-none"></div>
                      )}
                      <button
                        onClick={() => idx === currentLocation && enterLocation(idx)}
                        disabled={idx !== currentLocation}
                        className={`relative w-20 h-20 rounded-3xl flex items-center justify-center text-4xl transition-all duration-500 shadow-xl
                          ${idx < currentLocation ? 'bg-green-600/40 text-green-100 opacity-60 scale-90 border-2 border-green-500/30' :
                            idx === currentLocation ? 'bg-amber-600 text-white scale-125 border-4 border-amber-100 hover:rotate-12 cursor-pointer' :
                              'bg-amber-900/20 text-amber-900/30 opacity-40 scale-75 border-2 border-amber-900/10'}`}
                      >
                        {loc.icon}
                        {idx === currentLocation && (
                          <div className="absolute -top-12 left-1/2 transform -translate-x-1/2 glass px-4 py-2 rounded-xl text-sm font-black text-amber-200 whitespace-nowrap border border-amber-400/50 shadow-xl animate-float">
                            {loc.name}
                          </div>
                        )}
                        {idx < currentLocation && <span className="absolute -top-2 -right-2 text-xl">‚úÖ</span>}
                      </button>
                    </div>
                  </div>
                ))}
              </div>
              <p className="text-center mt-8 text-amber-200/60 font-medium uppercase tracking-[0.2em] animate-pulse">
                Liigu edasi m√∂√∂da Niilust...
              </p>
            </div>

            {/* Modals with enhanced styling */}
            {showTreasureRoom && (
              <div className="fixed inset-0 bg-black/90 backdrop-blur-md flex items-center justify-center z-50 p-4" onClick={() => setShowTreasureRoom(false)}>
                <div className="glass rounded-[40px] p-8 max-w-2xl w-full border-2 border-amber-500/30 shadow-[0_0_50px_rgba(251,191,36,0.2)]" onClick={e => e.stopPropagation()}>
                  <div className="flex justify-between items-center mb-8 border-b border-amber-500/20 pb-4">
                    <h2 className="text-4xl font-black text-amber-200 tracking-tighter uppercase italic">ìäù Aarete Saun</h2>
                    <button onClick={() => setShowTreasureRoom(false)} className="bg-amber-500/20 hover:bg-amber-500/40 text-amber-400 w-12 h-12 rounded-full flex items-center justify-center transition-all">‚úï</button>
                  </div>
                  {collectedTreasures.length === 0 ? (
                    <div className="py-20 text-center">
                      <div className="text-6xl opacity-20 mb-4">üè∫</div>
                      <p className="text-amber-300/50 text-xl font-medium">Sulle pole veel aardeid annetatud.</p>
                    </div>
                  ) : (
                    <div className="grid grid-cols-2 sm:grid-cols-4 gap-6 py-4">
                      {collectedTreasures.map(id => (
                        <div key={id} className="group relative">
                          <div className="absolute -inset-1 bg-gradient-to-r from-amber-600 to-amber-400 rounded-3xl blur opacity-25 group-hover:opacity-75 transition duration-1000 group-hover:duration-200"></div>
                          <div className="relative bg-amber-950/80 rounded-3xl p-4 text-center border border-amber-500/20 hover:scale-105 transition-all">
                            <div className="text-5xl mb-2 drop-shadow-lg">{treasures[id]?.icon}</div>
                            <div className="text-amber-200 text-xs font-black uppercase tracking-widest leading-tight">{treasures[id]?.name}</div>
                          </div>
                        </div>
                      ))}
                    </div>
                  )}
                </div>
              </div>
            )}
            {showFactCards && (
              <div className="fixed inset-0 bg-black/90 backdrop-blur-md flex items-center justify-center z-50 p-4" onClick={() => setShowFactCards(false)}>
                <div className="glass rounded-[40px] p-8 max-w-2xl w-full max-h-[80vh] overflow-y-auto border-2 border-amber-500/30" onClick={e => e.stopPropagation()}>
                  <div className="flex justify-between items-center mb-8 border-b border-amber-500/20 pb-4">
                    <h2 className="text-4xl font-black text-amber-200 tracking-tighter uppercase italic">ìèû Tarkuse Arhiiv</h2>
                    <button onClick={() => setShowFactCards(false)} className="bg-amber-500/20 hover:bg-amber-500/40 text-amber-400 w-12 h-12 rounded-full flex items-center justify-center transition-all">‚úï</button>
                  </div>
                  {factCards.length === 0 ? (
                    <div className="py-20 text-center text-amber-300/50 text-xl">Arhiiv on t√ºhi...</div>
                  ) : (
                    <div className="space-y-4">
                      {factCards.map((card, idx) => (
                        <div key={idx} className="bg-amber-950/60 rounded-3xl p-6 flex gap-6 items-start border border-amber-500/10 hover:border-amber-500/30 transition-all">
                          {card.image && <img src={card.image.url} alt="" className="w-20 h-20 rounded-2xl object-cover flex-shrink-0 border-2 border-amber-500/20" onError={(e) => e.target.style.display = 'none'} />}
                          <div>
                            <div className="text-amber-200 text-sm italic mb-2 opacity-60">"Kas teadsid, et..."</div>
                            <div className="text-amber-100 font-medium leading-relaxed">{card.fact}</div>
                          </div>
                        </div>
                      ))}
                    </div>
                  )}
                </div>
              </div>
            )}

            {showAchievements && (
              <div className="fixed inset-0 bg-black/90 backdrop-blur-md flex items-center justify-center z-50 p-4" onClick={() => setShowAchievements(false)}>
                <div className="glass rounded-[40px] p-8 max-w-3xl w-full max-h-[80vh] overflow-y-auto border-2 border-amber-500/30" onClick={e => e.stopPropagation()}>
                  <div className="flex justify-between items-center mb-8 border-b border-amber-500/20 pb-4">
                    <h2 className="text-4xl font-black text-amber-200 tracking-tighter uppercase italic">ìãπ Vaarao Autasud</h2>
                    <button onClick={() => setShowAchievements(false)} className="bg-amber-500/20 hover:bg-amber-500/40 text-amber-400 w-12 h-12 rounded-full flex items-center justify-center transition-all">‚úï</button>
                  </div>
                  <div className="grid grid-cols-1 sm:grid-cols-2 gap-4">
                    {achievements.map(a => {
                      const unlocked = unlockedAchievements.includes(a.id);
                      return (
                        <div key={a.id} className={`rounded-3xl p-6 flex items-center gap-4 border-2 transition-all ${unlocked ? 'bg-amber-500/20 border-amber-500/50 shadow-[0_0_20px_rgba(251,191,36,0.2)]' : 'bg-black/40 border-white/5 opacity-50'}`}>
                          <div className={`text-4xl w-16 h-16 flex items-center justify-center rounded-2xl ${unlocked ? 'bg-amber-400 text-amber-950 rotate-3' : 'bg-gray-800 rotate-0'}`}>{a.icon}</div>
                          <div>
                            <div className={`font-black uppercase tracking-tighter ${unlocked ? 'text-amber-200' : 'text-gray-500'}`}>{a.name}</div>
                            <div className={`text-xs ${unlocked ? 'text-amber-300/80' : 'text-gray-600'}`}>{a.description}</div>
                          </div>
                        </div>
                      );
                    })}
                  </div>
                </div>
              </div>
            )}
            {showHighScores && (
              <div className="fixed inset-0 bg-black/95 backdrop-blur-md flex items-center justify-center z-[130] p-4" onClick={() => setShowHighScores(false)}>
                <div className="glass rounded-[40px] p-8 max-w-lg w-full border-2 border-amber-500/30" onClick={e => e.stopPropagation()}>
                  <div className="flex justify-between items-center mb-8 border-b border-amber-500/20 pb-4">
                    <h2 className="text-3xl font-black text-amber-200 tracking-tighter uppercase italic">ìÇÄ EDETABEL</h2>
                    <button onClick={() => setShowHighScores(false)} className="bg-amber-500/20 hover:bg-amber-500/40 text-amber-400 w-10 h-10 rounded-full flex items-center justify-center transition-all">‚úï</button>
                  </div>

                  <div className="space-y-2">
                    {highScores.length === 0 ? (
                      <p className="text-center text-amber-300/50 py-10 italic">Veel pole √ºhtegi tulemust kirjas...</p>
                    ) : (
                      highScores.slice(0, 5).map((s, i) => (
                        <div key={i} className={`flex items-center justify-between p-4 rounded-2xl border ${i === 0 ? 'bg-amber-500/20 border-amber-400' : 'bg-black/20 border-white/5'}`}>
                          <div className="flex items-center gap-4">
                            <span className={`w-8 h-8 flex items-center justify-center rounded-lg font-black ${i === 0 ? 'bg-amber-400 text-amber-950' : 'bg-amber-900/50 text-amber-200'}`}>
                              {i + 1}
                            </span>
                            <div>
                              <div className="font-bold text-amber-100 flex items-center gap-2">
                                <span>{s.char}</span>
                                {s.playerName}
                              </div>
                              <div className="text-[10px] text-amber-500 uppercase tracking-widest">{s.date}</div>
                            </div>
                          </div>
                          <div className="text-2xl font-black text-amber-400 tracking-tighter">{s.score}</div>
                        </div>
                      ))
                    )}
                  </div>
                </div>
              </div>
            )}

            {showEventModal && pendingEvent && (
              <div className="fixed inset-0 bg-black/95 backdrop-blur-xl flex items-center justify-center z-[100] p-4">
                <div className={`rounded-[40px] p-10 max-w-md w-full text-center relative overflow-hidden border-4 ${pendingEvent.positive ? 'bg-gradient-to-b from-green-900 via-green-950 to-black border-green-500/50' : 'bg-gradient-to-b from-red-900 via-red-950 to-black border-red-500/50'}`}>
                  <div className="bg-sand absolute inset-0 opacity-10 pointer-events-none"></div>
                  <div className="text-8xl mb-6 animate-float relative z-10 drop-shadow-[0_0_20px_rgba(255,255,255,0.3)]">{pendingEvent.icon}</div>
                  <h2 className="text-4xl font-black text-white mb-4 uppercase tracking-tighter relative z-10">{pendingEvent.name}</h2>
                  <p className="text-xl text-white/80 mb-10 font-medium relative z-10 font-light italic leading-relaxed">"{pendingEvent.description}"</p>
                  <button onClick={() => applyEvent(pendingEvent)} className="w-full bg-white text-black font-black py-5 rounded-3xl text-xl shadow-2xl active:scale-95 transition-transform relative z-10 uppercase tracking-widest">
                    V√µta vastu ìÅ†
                  </button>
                </div>
              </div>
            )}

            {notification && (
              <div className={`fixed top-8 left-1/2 transform -translate-x-1/2 px-8 py-4 rounded-full shadow-2xl z-[110] animate-in slide-in-from-top duration-500 flex items-center gap-3 border-2 ${notification.type === 'success' ? 'bg-green-600 border-green-400' :
                notification.type === 'treasure' ? 'bg-amber-600 border-amber-400' :
                  notification.type === 'bonus' ? 'bg-purple-600 border-purple-400' :
                    notification.type === 'warning' ? 'bg-red-600 border-red-400' : 'bg-blue-600 border-blue-400'} text-white font-black uppercase tracking-tighter text-sm`}>
                <span className="text-xl">{notification.type === 'treasure' ? 'üíé' : '‚ú®'}</span>
                {notification.message}
              </div>
            )}

            {newAchievement && (
              <div className="fixed bottom-8 right-8 bg-gradient-to-r from-amber-600 to-amber-500 text-white p-6 rounded-[32px] shadow-[0_20px_50px_rgba(0,0,0,0.5)] z-[120] animate-in slide-in-from-right duration-500 flex items-center gap-6 border-2 border-amber-300/30">
                <div className="text-5xl bg-white/20 w-20 h-20 flex items-center justify-center rounded-3xl rotate-6 animate-bounce">{newAchievement.icon}</div>
                <div>
                  <div className="text-xs font-black uppercase tracking-[0.2em] mb-1 opacity-70">Uus saavutus!</div>
                  <div className="text-2xl font-black uppercase tracking-tighter">{newAchievement.name}</div>
                </div>
              </div>
            )}
          </div>
        );
      }

      if (screen === 'question' && currentQuestion) {
        const typeLabel = { written: '‚úçÔ∏è Kirjuta', fillin: 'üìù L√ºnk', choice: 'üîò Vali', identify: 'üîç Tuvasta', truefalse: '‚öñÔ∏è T√µene/v√§√§r', sorting: 'üî¢ J√§rjesta', matching: 'üîó √úhenda' };

        const handleSortClick = (idx) => {
          if (showResult) return;
          playSound('click');
          if (userSortOrder.includes(idx)) {
            setUserSortOrder(prev => prev.filter(i => i !== idx));
          } else {
            setUserSortOrder(prev => [...prev, idx]);
          }
        };

        return (
          <div className="min-h-screen bg-gradient-to-b from-amber-900 via-amber-950 to-black p-4 relative overflow-hidden">
            <div className="bg-sand absolute inset-0 pointer-events-none opacity-5"></div>

            <div className="max-w-2xl mx-auto mb-6 relative z-10">
              <div className="glass rounded-3xl p-4 flex justify-between items-center shadow-xl border-amber-500/20">
                <div className="flex gap-4 items-center">
                  <div className="flex gap-1">
                    {[...Array(5)].map((_, i) => (
                      <span key={i} className={`text-2xl transition-all ${i < lives ? 'drop-shadow-[0_0_8px_rgba(251,191,36,0.6)]' : 'opacity-20 grayscale'}`}>
                        {i === 0 ? 'ìÇì' : i === 1 ? 'ìÖÉ' : 'ìãπ'}
                      </span>
                    ))}
                  </div>
                  {streak >= 3 && <div className="bg-orange-600 px-3 py-1 rounded-full text-xs font-black text-white animate-pulse">üî• {streak}</div>}
                </div>
                <div className="flex items-center gap-4">
                  <div className="text-right">
                    <div className="text-amber-200 text-[10px] font-black uppercase tracking-widest leading-none mb-1">Punktid</div>
                    <div className="text-amber-400 font-bold text-sm tracking-tight">{score}</div>
                  </div>
                  <button onClick={() => setSoundEnabled(!soundEnabled)} className="w-10 h-10 flex items-center justify-center hover:bg-white/10 rounded-full transition-colors">
                    <span className="text-xl">{soundEnabled ? 'üîä' : 'üîá'}</span>
                  </button>
                </div>
              </div>
            </div>

            <div className="max-w-2xl mx-auto relative z-10">
              {/* TREASURE BAR (Active Items) */}
              {collectedTreasures.filter(t => treasures[t]?.effect).length > 0 && (
                <div className="mb-4 flex gap-2 overflow-x-auto pb-2 scrollbar-hide">
                  {collectedTreasures.filter(t => treasures[t]?.effect).map((t, i) => (
                    <button
                      key={i}
                      onClick={() => useTreasure(t)}
                      className="bg-amber-900/80 border border-amber-500/30 p-2 rounded-2xl flex items-center gap-2 hover:bg-amber-800 transition-all shrink-0"
                      title={treasures[t].description}
                    >
                      <span className="text-2xl">{treasures[t].icon}</span>
                      <span className="text-[10px] font-bold text-amber-200 uppercase tracking-tighter">Kasuta</span>
                    </button>
                  ))}
                </div>
              )}

              <div className="bg-white rounded-[40px] shadow-[0_40px_100px_-20px_rgba(0,0,0,0.8)] overflow-hidden border-8 border-amber-950/20">
                <div className="bg-amber-900 text-amber-100 p-4 flex justify-between items-center font-black uppercase tracking-widest text-xs px-8">
                  <span className="bg-amber-800 px-4 py-1.5 rounded-full border border-amber-500/30">{typeLabel[currentQuestion.type]}</span>
                  <div className="flex gap-1">
                    {[...Array(currentQuestion.difficulty || 1)].map((_, i) => <span key={i} className="text-amber-400 drop-shadow-[0_0_5px_rgba(251,191,36,0.8)]">‚≠ê</span>)}
                  </div>
                </div>

                <div className="bg-amber-50 p-6 flex justify-center items-center min-h-[200px] relative">
                  <div className="absolute inset-0 bg-cream-paper opacity-20"></div>
                  {currentQuestion.type !== 'hotspot' && (currentQuestion.displayImage || currentQuestion.image) && (
                    <div className="relative group transition-transform duration-500 hover:scale-105 max-h-[180px]">
                      <div className="absolute inset-0 bg-amber-500 rounded-3xl blur-xl opacity-20 group-hover:opacity-40 transition-opacity"></div>
                      <QuestionImage imageData={currentQuestion.displayImage || currentQuestion.image} large={true} />
                    </div>
                  )}
                  {currentQuestion.type === 'hotspot' && (
                    <div className="text-4xl text-amber-900/20 font-black uppercase tracking-widest animate-pulse">
                      Vaata kaarti allpool ‚¨áÔ∏è
                    </div>
                  )}
                </div>

                <div className="p-8 pb-12 bg-white relative">
                  <h2 className="text-2xl md:text-3xl font-black text-amber-950 mb-8 text-center leading-tight tracking-tight">
                    {currentQuestion.question}
                  </h2>

                  {showHint && currentQuestion.hint && (
                    <div className="bg-blue-50 border-l-8 border-blue-500 p-5 mb-8 rounded-2xl text-blue-900 animate-in slide-in-from-left duration-500 shadow-sm italic">
                      <div className="flex items-center gap-3">
                        <span className="text-3xl">üí°</span>
                        <p className="font-semibold text-lg">{currentQuestion.hint}</p>
                      </div>
                    </div>
                  )}

                  {!showResult && (
                    <div className="space-y-4">
                      {currentQuestion.type === 'truefalse' && (
                        <div className="flex gap-6">
                          <button onClick={() => { playSound('click'); setSelectedOption(true); }} className={`flex-1 btn-egypt p-6 rounded-3xl border-4 text-2xl font-black uppercase tracking-tighter transition-all ${selectedOption === true ? 'border-green-500 bg-green-500 text-white shadow-lg' : 'border-amber-100 bg-amber-50 text-amber-900'}`}>
                            ìÅπ T√ïENE
                          </button>
                          <button onClick={() => { playSound('click'); setSelectedOption(false); }} className={`flex-1 btn-egypt p-6 rounded-3xl border-4 text-2xl font-black uppercase tracking-tighter transition-all ${selectedOption === false ? 'border-red-500 bg-red-500 text-white shadow-lg' : 'border-amber-100 bg-amber-50 text-amber-900'}`}>
                            ìÅ¥ V√Ñ√ÑR
                          </button>
                        </div>
                      )}

                      {(currentQuestion.type === 'choice' || currentQuestion.type === 'identify') && (
                        <div className="grid gap-3">
                          {currentQuestion.options.map((option, idx) => !hiddenOptions.has(idx) && (
                            <button
                              key={idx}
                              onClick={() => { playSound('click'); setSelectedOption(idx); }}
                              className={`w-full btn-egypt p-5 text-left rounded-3xl border-4 text-lg font-bold transition-all flex items-center gap-4
                                ${selectedOption === idx ? 'border-amber-500 bg-amber-500 text-white shadow-md' : 'border-amber-100 bg-amber-50 text-amber-950 hover:bg-amber-100'}`}
                            >
                              <span className={`w-10 h-10 flex items-center justify-center rounded-2xl text-sm font-black transition-colors ${selectedOption === idx ? 'bg-white/20' : 'bg-amber-950/10'}`}>
                                {String.fromCharCode(65 + idx)}
                              </span>
                              {option}
                            </button>
                          ))}
                        </div>
                      )}

                      {currentQuestion.type === 'sorting' && (
                        <div className="grid gap-4">
                          <div className="space-y-2">
                            {userSortOrder.map((idx, orderIdx) => (
                              <div key={orderIdx} className="bg-amber-500 text-white p-4 rounded-2xl font-bold flex items-center justify-between animate-in zoom-in">
                                <div className="flex items-center gap-3">
                                  <span className="bg-white/20 w-8 h-8 flex items-center justify-center rounded-lg text-xs">{orderIdx + 1}</span>
                                  {currentQuestion.options[idx]}
                                </div>
                                <button onClick={() => handleSortClick(idx)} className="text-white/50 hover:text-white">‚úï</button>
                              </div>
                            ))}
                          </div>
                          <div className="flex flex-wrap gap-2 pt-4 border-t-2 border-amber-50">
                            {currentQuestion.options.map((option, idx) => !userSortOrder.includes(idx) && (
                              <button
                                key={idx}
                                onClick={() => handleSortClick(idx)}
                                className="bg-amber-100/50 text-amber-900 p-3 rounded-xl border-2 border-amber-200 text-sm font-bold hover:bg-amber-200 transition-all"
                              >
                                {option}
                              </button>
                            ))}
                          </div>
                        </div>
                      )}
                      {currentQuestion.type === 'multiSelect' && (
                        <div className="grid gap-3">
                          {currentQuestion.options.map((option, idx) => (
                            <button
                              key={idx}
                              onClick={() => {
                                playSound('click');
                                setSelectedOptions(prev => {
                                  const next = new Set(prev);
                                  if (next.has(idx)) next.delete(idx);
                                  else next.add(idx);
                                  return next;
                                });
                              }}
                              className={`w-full p-5 text-left rounded-3xl border-4 text-lg font-bold transition-all flex items-center gap-4
                                ${selectedOptions.has(idx) ? 'border-amber-500 bg-amber-500 text-white shadow-md' : 'border-amber-100 bg-amber-50 text-amber-950 hover:bg-amber-100'}`}
                            >
                              <div className={`w-8 h-8 rounded-lg border-2 flex items-center justify-center ${selectedOptions.has(idx) ? 'bg-white border-white text-amber-500' : 'border-amber-950/20'}`}>
                                {selectedOptions.has(idx) && '‚úì'}
                              </div>
                              {option}
                            </button>
                          ))}
                        </div>
                      )}

                      {currentQuestion.type === 'matching' && (
                        <div className="flex gap-4">
                          <div className="flex-1 space-y-3">
                            {currentQuestion.options.left.map((item, idx) => (
                              <button
                                key={idx}
                                onClick={() => { playSound('click'); setMatchingSelectedLeft(idx); }}
                                className={`w-full p-4 rounded-2xl border-2 text-sm font-bold text-left transition-all ${matchingPairs[idx] !== undefined ? 'bg-green-100 border-green-500 text-green-900 opacity-50 cursor-default' : (matchingSelectedLeft === idx ? 'bg-amber-500 border-amber-600 text-white' : 'bg-amber-50 border-amber-200 text-amber-950')}`}
                                disabled={matchingPairs[idx] !== undefined}
                              >
                                {item}
                                {matchingPairs[idx] !== undefined && <span className="float-right">üîó</span>}
                              </button>
                            ))}
                          </div>
                          <div className="flex-1 space-y-3">
                            {currentQuestion.options.right.map((item, idx) => {
                              const isMatched = Object.values(matchingPairs).includes(idx);
                              return (
                                <button
                                  key={idx}
                                  onClick={() => {
                                    if (matchingSelectedLeft !== null) {
                                      playSound('click');
                                      setMatchingPairs(prev => ({ ...prev, [matchingSelectedLeft]: idx }));
                                      setMatchingSelectedLeft(null);
                                    }
                                  }}
                                  className={`w-full p-4 rounded-2xl border-2 text-sm font-bold text-left transition-all ${isMatched ? 'bg-green-100 border-green-500 text-green-900 opacity-50 cursor-default' : (matchingSelectedLeft !== null ? 'hover:bg-amber-100 border-amber-300' : 'bg-amber-50 border-amber-200 text-amber-950 cursor-not-allowed')}`}
                                  disabled={isMatched || matchingSelectedLeft === null}
                                >
                                  {item}
                                </button>
                              );
                            })}
                          </div>
                        </div>
                      )}

                      {currentQuestion.type === 'hotspot' && (
                        <div className="relative cursor-crosshair group overflow-hidden rounded-[32px] border-4 border-amber-200 bg-amber-100 aspect-square w-full max-w-2xl mx-auto flex items-center justify-center shadow-inner"
                          onClick={(e) => {
                            const rect = e.currentTarget.getBoundingClientRect();
                            const x = ((e.clientX - rect.left) / rect.width) * 100;
                            const y = ((e.clientY - rect.top) / rect.height) * 100;
                            playSound('click');
                            setHotspotClick({ x, y });
                          }}
                        >
                          <div className="absolute inset-0">
                            <QuestionImage imageData={currentQuestion.image || currentQuestion.displayImage} full />
                          </div>
                          {hotspotClick && (
                            <div className="absolute w-12 h-12 flex items-center justify-center pointer-events-none z-30"
                              style={{ left: `${hotspotClick.x}%`, top: `${hotspotClick.y}%`, transform: 'translate(-50%, -50%)' }}
                            >
                              <div className="absolute inset-0 bg-amber-500 rounded-full animate-ping opacity-50"></div>
                              <div className="w-8 h-8 bg-amber-500 rounded-full border-4 border-amber-100 shadow-xl z-10"></div>
                              <div className="absolute -inset-2 border-2 border-amber-500 rounded-full opacity-30"></div>
                            </div>
                          )}
                          {!hotspotClick && (
                            <div className="absolute inset-x-0 bottom-4 text-center pointer-events-none z-20">
                              <span className="bg-amber-950/80 text-white px-4 py-2 rounded-full text-xs font-bold uppercase tracking-widest animate-pulse">
                                Kliki √µigel kohal kaardil!
                              </span>
                            </div>
                          )}
                        </div>
                      )}

                      {(currentQuestion.type === 'written' || currentQuestion.type === 'fillin') && (
                        <input
                          type="text"
                          value={userAnswer}
                          onChange={(e) => setUserAnswer(e.target.value)}
                          onKeyDown={(e) => e.key === 'Enter' && userAnswer.trim() && submitAnswer()}
                          placeholder="..."
                          className="w-full p-6 text-3xl font-black text-center border-4 border-amber-100 rounded-[32px] focus:border-amber-500 focus:bg-amber-50 focus:outline-none transition-all placeholder:opacity-20 text-amber-950"
                          autoFocus
                        />
                      )}

                      <div className="flex gap-4 mt-10">
                        <button
                          onClick={useHint}
                          disabled={!currentQuestion.hint || showHint || (!freeHint && hints <= 0)}
                          className={`w-20 h-20 rounded-3xl transition-all flex items-center justify-center text-3xl shadow-lg
                            ${currentQuestion.hint && !showHint && (freeHint || hints > 0) ? 'bg-blue-500 hover:bg-blue-600 text-white hover:scale-105' : 'bg-gray-100 text-gray-300'}`}
                        >
                          {freeHint ? 'ü¶¢' : 'ü™∂'}
                        </button>
                        <button
                          onClick={submitAnswer}
                          disabled={
                            (currentQuestion.type === 'written' && !userAnswer.trim()) ||
                            (currentQuestion.type === 'fillin' && !userAnswer.trim()) ||
                            ((currentQuestion.type === 'choice' || currentQuestion.type === 'identify') && selectedOption === null) ||
                            (currentQuestion.type === 'truefalse' && selectedOption === null) ||
                            (currentQuestion.type === 'sorting' && userSortOrder.length < currentQuestion.options.length) ||
                            (currentQuestion.type === 'multiSelect' && selectedOptions.size === 0) ||
                            (currentQuestion.type === 'matching' && Object.keys(matchingPairs).length < currentQuestion.options.left.length) ||
                            (currentQuestion.type === 'hotspot' && !hotspotClick)
                          }
                          className="flex-1 btn-egypt bg-gradient-to-r from-amber-600 to-amber-700 disabled:from-gray-300 disabled:to-gray-400 disabled:shadow-none text-white font-black text-2xl py-5 rounded-3xl shadow-xl shadow-amber-900/40 uppercase tracking-tighter"
                        >
                          VASTA ìÅ±
                        </button>
                      </div>
                    </div>
                  )}

                  {showResult && (
                    <div className={`p-8 rounded-[40px] animate-in zoom-in duration-300 ${isCorrect ? 'bg-green-500 text-white shadow-2xl shadow-green-500/30' : 'bg-red-500 text-white shadow-2xl shadow-red-500/50'}`}>
                      <div className="flex items-center gap-6 mb-6">
                        <div className="w-20 h-20 bg-white/20 rounded-3xl flex items-center justify-center text-6xl drop-shadow-xl animate-bounce">
                          {isCorrect ? '‚ú®' : 'ìÅº'}
                        </div>
                        <div>
                          <h3 className="text-3xl font-black uppercase tracking-tighter leading-none mb-2">
                            {isCorrect ? 'HIILGAV!' : 'OI-OI...'}
                          </h3>
                          <p className="text-white/80 font-bold italic">{isCorrect ? 'Suurep√§rane t√∂√∂!' : 'See kord ei t√§ppi...'}</p>
                        </div>
                      </div>

                      {isCorrect && currentQuestion.treasure && treasures[currentQuestion.treasure] && (
                        <div className="bg-amber-400/30 border border-amber-300 rounded-2xl p-4 mb-4 flex items-center gap-4 animate-in slide-in-from-bottom">
                          <span className="text-4xl">{treasures[currentQuestion.treasure].icon}</span>
                          <div>
                            <div className="text-[10px] font-black uppercase tracking-widest text-amber-100">Uus aare korjatud!</div>
                            <div className="font-bold text-lg">{treasures[currentQuestion.treasure].name}</div>
                          </div>
                        </div>
                      )}

                      <div className="bg-white/10 rounded-3xl p-6 mb-6 border border-white/20 text-left">
                        {!isCorrect && (
                          <div className="mb-6 pb-6 border-b border-white/10">
                            <div className="text-xs font-black uppercase tracking-widest opacity-70 mb-2 text-amber-200">√ïige vastus oli</div>
                            <div className="text-2xl font-black text-white">
                              {currentQuestion.type === 'truefalse' ? (currentQuestion.correct ? 'T√µene' : 'V√§√§r') :
                                currentQuestion.type === 'choice' || currentQuestion.type === 'identify' ? currentQuestion.options[currentQuestion.correct] :
                                  currentQuestion.type === 'sorting' ? currentQuestion.correct.map(i => currentQuestion.options[i]).join(' ‚Üí ') :
                                    currentQuestion.answer?.[0]}
                            </div>
                          </div>
                        )}
                        {(currentQuestion.explanation || currentQuestion.fact) && (
                          <div>
                            <div className="text-xs font-black uppercase tracking-widest opacity-70 mb-2 text-amber-200">Kas teadsid?</div>
                            <p className="text-lg font-medium opacity-95 leading-relaxed italic text-white">
                              "{currentQuestion.explanation || currentQuestion.fact}"
                            </p>
                          </div>
                        )}
                      </div>

                      <button onClick={nextQuestion} className="w-full bg-white text-black font-black py-6 rounded-3xl text-2xl shadow-2xl transition-transform hover:scale-[1.02] active:scale-95 uppercase tracking-tighter">
                        {fallingBack ? 'üòµ KUKUD TAGASI' : 'J√ÑTKA TEEKONDA ìÖõ'}
                      </button>
                    </div>
                  )}
                </div>
              </div>
            </div>
          </div>
        );
      }

      if (screen === 'victory') {
        return (
          <div className="min-h-screen bg-gradient-to-b from-amber-600 via-amber-400 to-amber-700 flex items-center justify-center p-4 relative overflow-hidden">
            <div className="bg-sand absolute inset-0 pointer-events-none opacity-20"></div>
            <div className="text-center max-w-2xl relative z-10">
              <div className="text-9xl mb-8 animate-float drop-shadow-2xl">üëë</div>
              <h1 className="text-7xl font-black text-amber-950 mb-2 uppercase tracking-tighter">SUUR V√ïIT!</h1>
              <p className="text-3xl text-amber-900 font-bold mb-10 tracking-widest italic">{playerName}, oled Niiluse valitseja!</p>

              <div className="glass rounded-[40px] p-10 mb-10 shadow-[0_40px_100px_-20px_rgba(0,0,0,0.4)] border-2 border-white/30 backdrop-blur-xl">
                <div className="text-6xl font-black text-amber-950 mb-8 border-b-2 border-amber-950/10 pb-6 tracking-tighter">{score}<span className="text-xl uppercase ml-2 opacity-50">punkti</span></div>
                <div className="grid grid-cols-2 md:grid-cols-4 gap-6">
                  <div className="bg-amber-950/5 p-4 rounded-3xl border border-amber-950/5">
                    <div className="text-3xl mb-1">üî•</div>
                    <div className="text-[10px] font-black uppercase tracking-widest opacity-60 text-amber-900 mb-1">Parim</div>
                    <div className="text-2xl font-black text-amber-950">{bestStreak}</div>
                  </div>
                  <div className="bg-amber-950/5 p-4 rounded-3xl border border-amber-950/5">
                    <div className="text-3xl mb-1">üíé</div>
                    <div className="text-[10px] font-black uppercase tracking-widest opacity-60 text-amber-900 mb-1">Aarded</div>
                    <div className="text-2xl font-black text-amber-950">{collectedTreasures.length}</div>
                  </div>
                  <div className="bg-amber-950/5 p-4 rounded-3xl border border-amber-950/5">
                    <div className="text-3xl mb-1">üìö</div>
                    <div className="text-[10px] font-black uppercase tracking-widest opacity-60 text-amber-900 mb-1">Faktid</div>
                    <div className="text-2xl font-black text-amber-950">{factCards.length}</div>
                  </div>
                  <div className="bg-amber-950/5 p-4 rounded-3xl border border-amber-950/5">
                    <div className="text-3xl mb-1">üèÜ</div>
                    <div className="text-[10px] font-black uppercase tracking-widest opacity-60 text-amber-900 mb-1">Tiitlid</div>
                    <div className="text-2xl font-black text-amber-950">{unlockedAchievements.length}</div>
                  </div>
                </div>
              </div>

              <div className="text-6xl mb-10 flex justify-center gap-6 opacity-80 animate-pulse">
                <span>üèõÔ∏è</span><span>üê™</span><span>üî∫</span><span>üëë</span><span>üóø</span>
              </div>

              <button onClick={() => { playSound('click'); setScreen('start'); }} className="btn-egypt bg-amber-950 text-white font-black py-6 px-16 rounded-3xl text-3xl shadow-2xl hover:scale-105 active:scale-95 transition-all uppercase tracking-tighter">
                M√§ngi uuesti ìÅ±
              </button>

              <button
                onClick={() => { playSound('click'); setShowHighScores(true); }}
                className="block mx-auto mt-6 text-amber-950/60 font-black uppercase tracking-widest hover:text-amber-950 transition-colors"
              >
                üèÜ Vaata edetabelit
              </button>
            </div>
          </div>
        );
      }
      if (screen === 'gameover') {
        return (
          <div className="min-h-screen bg-gradient-to-b from-red-900 via-black to-red-950 flex items-center justify-center p-4 relative overflow-hidden">
            <div className="bg-sand absolute inset-0 pointer-events-none opacity-10"></div>
            <div className="text-center max-w-2xl relative z-10">
              <div className="text-9xl mb-8 animate-float drop-shadow-2xl">üíÄ</div>
              <h1 className="text-6xl font-black text-white mb-2 uppercase tracking-tighter">TEEKOND KATKES</h1>
              <p className="text-2xl text-red-500 font-bold mb-10 tracking-widest italic">Sinu hing ei l√§binud Osirise kohut...</p>

              <div className="glass rounded-[40px] p-10 mb-10 border-2 border-red-500/30">
                <div className="text-5xl font-black text-white mb-6 tracking-tighter">{score}<span className="text-lg uppercase ml-2 opacity-50">punkti</span></div>
                <button onClick={handleFallBack} className="btn-egypt w-full bg-red-600 text-white font-black py-5 rounded-2xl text-xl shadow-xl hover:bg-red-500 transition-all uppercase mb-4">
                  ìÅÄ T√µuse tuhast (Tagasi)
                </button>
                <button onClick={() => setScreen('start')} className="w-full bg-transparent text-white/60 font-bold py-3 uppercase tracking-widest hover:text-white transition-colors">
                  Tagasi algusesse
                </button>
              </div>
            </div>
          </div>
        );
      }


      return null;
    };

    ReactDOM.render(<NiiluseTeekond />, document.getElementById('root'));

    // Service Worker Registration
    if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
        navigator.serviceWorker.register('./sw.js')
          .then(registration => console.log('SW registered:', registration))
          .catch(error => console.log('SW registration failed:', error));
      });
    }
  </script>
</body>

</html>